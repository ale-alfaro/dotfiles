<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>.. Field struct expression</title>
    
    <link rel="preload" href="../../assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="../../application.css" />
    <link rel="stylesheet" type="text/css" href="../../assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="reference/expressions/struct-expr" prefix="../../" listing-src="../../navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _rust"><h1 class="rule" id="r-expr.struct">
<a class="rule-link" href="#r-expr.struct" title="expr.struct"><span>[expr<wbr>.struct]</wbr></span></a> </h1> <h1 id="struct-expressions">Struct expressions</h1> <div class="rule" id="r-expr.struct.syntax">
<a class="rule-link" href="#r-expr.struct.syntax" title="expr.struct.syntax"><span>[expr<wbr>.struct<wbr>.syntax]</wbr></wbr></span></a> </div> <div class="grammar-container"> <p><strong><sup>Syntax</sup></strong> <br> <span class="grammar-text grammar-production" id="grammar-StructExpression" onclick="show_railroad()"><a href="struct-expr#railroad-StructExpression">StructExpression</a></span> → <br> <span class="grammar-text"><a href="../paths#grammar-PathInExpression">PathInExpression</a></span> <span class="grammar-literal">{</span> ( <span class="grammar-text"><a href="struct-expr#grammar-StructExprFields">StructExprFields</a></span> | <span class="grammar-text"><a href="struct-expr#grammar-StructBase">StructBase</a></span> )<sup>?</sup> <span class="grammar-literal">}</span></p> <p><span class="grammar-text grammar-production" id="grammar-StructExprFields" onclick="show_railroad()"><a href="struct-expr#railroad-StructExprFields">StructExprFields</a></span> → <br> <span class="grammar-text"><a href="struct-expr#grammar-StructExprField">StructExprField</a></span> ( <span class="grammar-literal">,</span> <span class="grammar-text"><a href="struct-expr#grammar-StructExprField">StructExprField</a></span> )<sup>*</sup> ( <span class="grammar-literal">,</span> <span class="grammar-text"><a href="struct-expr#grammar-StructBase">StructBase</a></span> | <span class="grammar-literal">,</span><sup>?</sup> )</p> <p><span class="grammar-text grammar-production" id="grammar-StructExprField" onclick="show_railroad()"><a href="struct-expr#railroad-StructExprField">StructExprField</a></span> → <br> <span class="grammar-text"><a href="../attributes#grammar-OuterAttribute">OuterAttribute</a></span><sup>*</sup> <br> ( <br> <span class="grammar-text"><a href="../identifiers#grammar-IDENTIFIER">IDENTIFIER</a></span> <br> | ( <span class="grammar-text"><a href="../identifiers#grammar-IDENTIFIER">IDENTIFIER</a></span> | <span class="grammar-text"><a href="../tokens#grammar-TUPLE_INDEX">TUPLE_INDEX</a></span> ) <span class="grammar-literal">:</span> <span class="grammar-text"><a href="../expressions#grammar-Expression">Expression</a></span> <br> )</p> <p><span class="grammar-text grammar-production" id="grammar-StructBase" onclick="show_railroad()"><a href="struct-expr#railroad-StructBase">StructBase</a></span> → <span class="grammar-literal">..</span> <span class="grammar-text"><a href="../expressions#grammar-Expression">Expression</a></span></p> <p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p> </div> <div class="grammar-railroad grammar-hidden"> <div style="width: 548px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-StructExpression">
<svg class="railroad" viewbox="0 0 548 120" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="struct-expr.html#grammar-StructExpression"> <text class="comment" x="71" y="25"> StructExpression</text> </a> <g class="sequence">  <g class="sequence"> <a class="link" xlink:href="../paths.html#railroad-PathInExpression"> <g class="nonterminal">  <text x="109" y="71"> PathInExpression</text> </g> </a> <g class="terminal">  <text x="207" y="71"> {</text> </g> <g class="optional">  <g class="choice">  <a class="link" xlink:href="struct-expr.html#railroad-StructExprFields"> <g class="nonterminal">  <text x="353" y="71"> StructExprFields</text> </g> </a>   <a class="link" xlink:href="struct-expr.html#railroad-StructBase"> <g class="nonterminal">  <text x="329" y="104"> StructBase</text> </g> </a> </g> </g> <g class="terminal">  <text x="499" y="71"> }</text> </g>    </g>    </g> </g> </svg> </div> <div style="width: 666px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-StructExprFields">
<svg class="railroad" viewbox="0 0 666 132" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="struct-expr.html#grammar-StructExprFields"> <text class="comment" x="71" y="25"> StructExprFields</text> </a> <g class="sequence">  <g class="sequence"> <a class="link" xlink:href="struct-expr.html#railroad-StructExprField"> <g class="nonterminal">  <text x="105" y="71"> StructExprField</text> </g> </a> <g class="optional">  <g class="repeat">   <g class="sequence"> <g class="terminal">  <text x="235" y="71"> ,</text> </g> <a class="link" xlink:href="struct-expr.html#railroad-StructExprField"> <g class="nonterminal">  <text x="329" y="71"> StructExprField</text> </g> </a>  </g> </g> </g> <g class="choice">  <g class="sequence"> <g class="terminal">  <text x="483" y="71"> ,</text> </g> <a class="link" xlink:href="struct-expr.html#railroad-StructBase"> <g class="nonterminal">  <text x="557" y="71"> StructBase</text> </g> </a>  </g>   <g class="optional">  <g class="terminal">  <text x="507" y="116"> ,</text> </g> </g> </g>   </g>    </g> </g> </svg> </div> <div style="width: 636px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-StructExprField">
<svg class="railroad" viewbox="0 0 636 153" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="struct-expr.html#grammar-StructExprField"> <text class="comment" x="67" y="25"> StructExprField</text> </a> <g class="sequence">  <g class="sequence"> <g class="optional">  <g class="repeat">   <a class="link" xlink:href="../attributes.html#railroad-OuterAttribute"> <g class="nonterminal">  <text x="137" y="71"> OuterAttribute</text> </g> </a> </g> </g> <g class="choice">  <g class="sequence"> <a class="link" xlink:href="../identifiers.html#railroad-IDENTIFIER"> <g class="nonterminal">  <text x="323" y="71"> IDENTIFIER</text> </g> </a> </g>   <g class="sequence"> <g class="choice">  <a class="link" xlink:href="../identifiers.html#railroad-IDENTIFIER"> <g class="nonterminal">  <text x="347" y="104"> IDENTIFIER</text> </g> </a>   <a class="link" xlink:href="../tokens.html#railroad-TUPLE_INDEX"> <g class="nonterminal">  <text x="351" y="137"> TUPLE_INDEX</text> </g> </a> </g> <g class="terminal">  <text x="453" y="104"> :</text> </g> <a class="link" xlink:href="../expressions.html#railroad-Expression"> <g class="nonterminal">  <text x="527" y="104"> Expression</text> </g> </a>   </g> </g>  </g>    </g> </g> </svg> </div> <div style="width: 216px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-StructBase">
<svg class="railroad" viewbox="0 0 216 74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="struct-expr.html#grammar-StructBase"> <text class="comment" x="50" y="25"> StructBase</text> </a> <g class="sequence">  <g class="sequence"> <g class="terminal">  <text x="53" y="58"> ..</text> </g> <a class="link" xlink:href="../expressions.html#railroad-Expression"> <g class="nonterminal">  <text x="131" y="58"> Expression</text> </g> </a>  </g>    </g> </g> </svg> </div> </div> <div class="rule" id="r-expr.struct.intro">
<a class="rule-link" href="#r-expr.struct.intro" title="expr.struct.intro"><span>[expr<wbr>.struct<wbr>.intro]</wbr></wbr></span></a> </div> <p>A <em>struct expression</em> creates a struct, enum, or union value. It consists of a path to a <a href="../items/structs">struct</a>, <a href="../items/enumerations">enum variant</a>, or <a href="../items/unions">union</a> item followed by the values for the fields of the item.</p> <p>The following are examples of struct expressions:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Point { x: f64, y: f64 }
struct NothingInMe { }
mod game { pub struct User&lt;'a&gt; { pub name: &amp;'a str, pub age: u32, pub score: usize } }
enum Enum { Variant {} }
Point {x: 10.0, y: 20.0};
NothingInMe {};
let u = game::User {name: "Joe", age: 35, score: 100_000};
Enum::Variant {};
}</pre> <div class="alert alert-note"> <blockquote> <p class="alert-title">Note</p> <p>Tuple structs and tuple enum variants are typically instantiated using a <a href="call-expr#r-expr.call">call expression</a> referring to the <a href="../items/structs#r-items.struct.tuple">constructor in the value namespace</a>. These are distinct from a struct expression using curly braces referring to the constructor in the type namespace.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Position(i32, i32, i32);
Position(0, 0, 0);  // Typical way of creating a tuple struct.
let c = Position;  // `c` is a function that takes 3 arguments.
let pos = c(8, 6, 7);  // Creates a `Position` value.

enum Version { Triple(i32, i32, i32) };
Version::Triple(0, 0, 0);
let f = Version::Triple;
let ver = f(8, 6, 7);
}</pre> <p>The last segment of the call path cannot refer to a type alias:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
trait Tr { type T; }
impl&lt;T&gt; Tr for T { type T = T; }

struct Tuple();
enum Enum { Tuple() }

// &lt;Unit as Tr&gt;::T(); // causes an error -- `::T` is a type, not a value
&lt;Enum as Tr&gt;::T::Tuple(); // OK
}</pre>  <p>Unit structs and unit enum variants are typically instantiated using a <a href="path-expr#r-expr.path">path expression</a> referring to the <a href="../items/structs#r-items.struct.unit">constant in the value namespace</a>.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Gamma;
// Gamma unit value, referring to the const in the value namespace.
let a = Gamma;
// Exact same value as `a`, but constructed using a struct expression
// referring to the type namespace.
let b = Gamma {};

enum ColorSpace { Oklch }
let c = ColorSpace::Oklch;
let d = ColorSpace::Oklch {};
}</pre> </blockquote> </div> <div class="rule" id="r-expr.struct.field">
<a class="rule-link" href="#r-expr.struct.field" title="expr.struct.field"><span>[expr<wbr>.struct<wbr>.field]</wbr></wbr></span></a> </div> <h2 id="field-struct-expression">Field struct expression</h2> <div class="rule" id="r-expr.struct.field.intro">
<a class="rule-link" href="#r-expr.struct.field.intro" title="expr.struct.field.intro"><span>[expr<wbr>.struct<wbr>.field<wbr>.intro]</wbr></wbr></wbr></span></a> </div> <p>A struct expression with fields enclosed in curly braces allows you to specify the value for each individual field in any order. The field name is separated from its value with a colon.</p> <div class="rule" id="r-expr.struct.field.union-constraint">
<a class="rule-link" href="#r-expr.struct.field.union-constraint" title="expr.struct.field.union-constraint"><span>[expr<wbr>.struct<wbr>.field<wbr>.union-constraint]</wbr></wbr></wbr></span></a> </div> <p>A value of a <a href="../items/unions">union</a> type can only be created using this syntax, and it must specify exactly one field.</p> <div class="rule" id="r-expr.struct.update">
<a class="rule-link" href="#r-expr.struct.update" title="expr.struct.update"><span>[expr<wbr>.struct<wbr>.update]</wbr></wbr></span></a> </div> <h2 id="functional-update-syntax">Functional update syntax</h2> <div class="rule" id="r-expr.struct.update.intro">
<a class="rule-link" href="#r-expr.struct.update.intro" title="expr.struct.update.intro"><span>[expr<wbr>.struct<wbr>.update<wbr>.intro]</wbr></wbr></wbr></span></a> </div> <p>A struct expression that constructs a value of a struct type can terminate with the syntax <code>..</code> followed by an expression to denote a functional update.</p> <div class="rule" id="r-expr.struct.update.base-same-type">
<a class="rule-link" href="#r-expr.struct.update.base-same-type" title="expr.struct.update.base-same-type"><span>[expr<wbr>.struct<wbr>.update<wbr>.base-same-type]</wbr></wbr></wbr></span></a> </div> <p>The expression following <code>..</code> (the base) must have the same struct type as the new struct type being formed.</p> <div class="rule" id="r-expr.struct.update.fields">
<a class="rule-link" href="#r-expr.struct.update.fields" title="expr.struct.update.fields"><span>[expr<wbr>.struct<wbr>.update<wbr>.fields]</wbr></wbr></wbr></span></a> </div> <p>The entire expression uses the given values for the fields that were specified and moves or copies the remaining fields from the base expression.</p> <div class="rule" id="r-expr.struct.update.visibility-constraint">
<a class="rule-link" href="#r-expr.struct.update.visibility-constraint" title="expr.struct.update.visibility-constraint"><span>[expr<wbr>.struct<wbr>.update<wbr>.visibility-constraint]</wbr></wbr></wbr></span></a> </div> <p>As with all struct expressions, all of the fields of the struct must be <a href="../visibility-and-privacy">visible</a>, even those not explicitly named.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Point3d { x: i32, y: i32, z: i32 }
let mut base = Point3d {x: 1, y: 2, z: 3};
let y_ref = &amp;mut base.y;
Point3d {y: 0, z: 10, .. base}; // OK, only base.x is accessed
drop(y_ref);
}</pre> <div class="rule" id="r-expr.struct.brace-restricted-positions">
<a class="rule-link" href="#r-expr.struct.brace-restricted-positions" title="expr.struct.brace-restricted-positions"><span>[expr<wbr>.struct<wbr>.brace-restricted-positions]</wbr></wbr></span></a> </div> <p>Struct expressions can’t be used directly in a <a href="loop-expr">loop</a> or <a href="if-expr#if-expressions">if</a> expression’s head, or in the <a href="../glossary#scrutinee">scrutinee</a> of an <a href="if-expr#if-let-patterns">if let</a> or <a href="match-expr">match</a> expression. However, struct expressions can be used in these situations if they are within another expression, for example inside <a href="grouped-expr">parentheses</a>.</p> <div class="rule" id="r-expr.struct.tuple-field">
<a class="rule-link" href="#r-expr.struct.tuple-field" title="expr.struct.tuple-field"><span>[expr<wbr>.struct<wbr>.tuple-field]</wbr></wbr></span></a> </div> <p>The field names can be decimal integer values to specify indices for constructing tuple structs. This can be used with base structs to fill out the remaining indices not specified:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Color(u8, u8, u8);
let c1 = Color(0, 0, 0);  // Typical way of creating a tuple struct.
let c2 = Color{0: 255, 1: 127, 2: 0};  // Specifying fields by index.
let c3 = Color{1: 0, ..c2};  // Fill out all other fields using a base struct.
}</pre> <div class="rule" id="r-expr.struct.field.named">
<a class="rule-link" href="#r-expr.struct.field.named" title="expr.struct.field.named"><span>[expr<wbr>.struct<wbr>.field<wbr>.named]</wbr></wbr></wbr></span></a> </div> <h3 id="struct-field-init-shorthand">Struct field init shorthand</h3> <p>When initializing a data structure (struct, enum, union) with named (but not numbered) fields, it is allowed to write <code>fieldname</code> as a shorthand for <code>fieldname: fieldname</code>. This allows a compact syntax with less duplication. For example:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
struct Point3d { x: i32, y: i32, z: i32 }
let x = 0;
let y_value = 0;
let z = 0;
Point3d { x: x, y: y_value, z: z };
Point3d { x, y: y_value, z };
}</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/reference/expressions/struct-expr.html" class="_attribution-link">https://doc.rust-lang.org/reference/expressions/struct-expr.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="../../assets/index.js"></script>
</body>

</html>