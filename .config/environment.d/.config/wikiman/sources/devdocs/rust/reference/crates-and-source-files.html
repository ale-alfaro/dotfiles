<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>.. Main Functions</title>
    
    <link rel="preload" href="../assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="../application.css" />
    <link rel="stylesheet" type="text/css" href="../assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="reference/crates-and-source-files" prefix="../" listing-src="../navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _rust"><h1 class="rule" id="r-crate">
<a class="rule-link" href="#r-crate" title="crate"><span>[crate]</span></a> </h1> <h1 id="crates-and-source-files">Crates and source files</h1> <div class="rule" id="r-crate.syntax">
<a class="rule-link" href="#r-crate.syntax" title="crate.syntax"><span>[crate<wbr>.syntax]</wbr></span></a> </div> <div class="grammar-container"> <p><strong><sup>Syntax</sup></strong> <br> <span class="grammar-text grammar-production" id="grammar-Crate" onclick="show_railroad()"><a href="crates-and-source-files#railroad-Crate">Crate</a></span> → <br> <span class="grammar-text"><a href="attributes#grammar-InnerAttribute">InnerAttribute</a></span><sup>*</sup> <br> <span class="grammar-text"><a href="items#grammar-Item">Item</a></span><sup>*</sup></p> <p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p> </div> <div class="grammar-railroad grammar-hidden"> <div style="width: 408px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-Crate">
<svg class="railroad" viewbox="0 0 408 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="crates-and-source-files.html#grammar-Crate"> <text class="comment" x="32" y="25"> Crate</text> </a> <g class="sequence">  <g class="sequence"> <g class="optional">  <g class="repeat">   <a class="link" xlink:href="attributes.html#railroad-InnerAttribute"> <g class="nonterminal">  <text x="137" y="71"> InnerAttribute</text> </g> </a> </g> </g> <g class="optional">  <g class="repeat">   <a class="link" xlink:href="items.html#railroad-Item"> <g class="nonterminal">  <text x="311" y="71"> Item</text> </g> </a> </g> </g>  </g>    </g> </g> </svg> </div> </div> <div class="alert alert-note"> <blockquote> <p class="alert-title">Note</p> <p>Although Rust, like any other language, can be implemented by an interpreter as well as a compiler, the only existing implementation is a compiler, and the language has always been designed to be compiled. For these reasons, this section assumes a compiler.</p> </blockquote> </div> <div class="rule" id="r-crate.compile-time">
<a class="rule-link" href="#r-crate.compile-time" title="crate.compile-time"><span>[crate<wbr>.compile-time]</wbr></span></a> </div> <p>Rust’s semantics obey a <em>phase distinction</em> between compile-time and run-time.<sup class="footnote-reference" id="fr-phase-distinction-1"><a href="#footnote-phase-distinction">1</a></sup> Semantic rules that have a <em>static interpretation</em> govern the success or failure of compilation, while semantic rules that have a <em>dynamic interpretation</em> govern the behavior of the program at run-time.</p> <div class="rule" id="r-crate.unit">
<a class="rule-link" href="#r-crate.unit" title="crate.unit"><span>[crate<wbr>.unit]</wbr></span></a> </div> <p>The compilation model centers on artifacts called <em>crates</em>. Each compilation processes a single crate in source form, and if successful, produces a single crate in binary form: either an executable or some sort of library.<sup class="footnote-reference" id="fr-cratesourcefile-1"><a href="#footnote-cratesourcefile">2</a></sup></p> <div class="rule" id="r-crate.module">
<a class="rule-link" href="#r-crate.module" title="crate.module"><span>[crate<wbr>.module]</wbr></span></a> </div> <p>A <em>crate</em> is a unit of compilation and linking, as well as versioning, distribution, and runtime loading. A crate contains a <em>tree</em> of nested <a href="items/modules">module</a> scopes. The top level of this tree is a module that is anonymous (from the point of view of paths within the module) and any item within a crate has a canonical <a href="paths">module path</a> denoting its location within the crate’s module tree.</p> <div class="rule" id="r-crate.input-source">
<a class="rule-link" href="#r-crate.input-source" title="crate.input-source"><span>[crate<wbr>.input-source]</wbr></span></a> </div> <p>The Rust compiler is always invoked with a single source file as input, and always produces a single output crate. The processing of that source file may result in other source files being loaded as modules. Source files have the extension <code>.rs</code>.</p> <div class="rule" id="r-crate.module-def">
<a class="rule-link" href="#r-crate.module-def" title="crate.module-def"><span>[crate<wbr>.module-def]</wbr></span></a> </div> <p>A Rust source file describes a module, the name and location of which — in the module tree of the current crate — are defined from outside the source file: either by an explicit <a href="items/modules#grammar-Module">Module</a> item in a referencing source file, or by the name of the crate itself.</p> <div class="rule" id="r-crate.inline-module">
<a class="rule-link" href="#r-crate.inline-module" title="crate.inline-module"><span>[crate<wbr>.inline-module]</wbr></span></a> </div> <p>Every source file is a module, but not every module needs its own source file: <a href="items/modules">module definitions</a> can be nested within one file.</p> <div class="rule" id="r-crate.items">
<a class="rule-link" href="#r-crate.items" title="crate.items"><span>[crate<wbr>.items]</wbr></span></a> </div> <p>Each source file contains a sequence of zero or more <a href="items#grammar-Item">Item</a> definitions, and may optionally begin with any number of <a href="attributes">attributes</a> that apply to the containing module, most of which influence the behavior of the compiler.</p> <div class="rule" id="r-crate.attributes">
<a class="rule-link" href="#r-crate.attributes" title="crate.attributes"><span>[crate<wbr>.attributes]</wbr></span></a> </div> <p>The anonymous crate module can have additional attributes that apply to the crate as a whole.</p> <div class="alert alert-note"> <blockquote> <p class="alert-title">Note</p> <p>The file’s contents may be preceded by a <a href="input-format#shebang-removal">shebang</a>.</p> </blockquote> </div> <pre data-language="rust">#![allow(unused)]
fn main() {
// Specify the crate name.
#![crate_name = "projx"]

// Specify the type of output artifact.
#![crate_type = "lib"]

// Turn on a warning.
// This can be done in any module, not just the anonymous crate module.
#![warn(non_camel_case_types)]
}</pre> <div class="rule" id="r-crate.main">
<a class="rule-link" href="#r-crate.main" title="crate.main"><span>[crate<wbr>.main]</wbr></span></a> </div> <h2 id="main-functions">Main Functions</h2> <div class="rule" id="r-crate.main.general">
<a class="rule-link" href="#r-crate.main.general" title="crate.main.general"><span>[crate<wbr>.main<wbr>.general]</wbr></wbr></span></a> </div> <p>A crate that contains a <code>main</code> <a href="items/functions">function</a> can be compiled to an executable.</p> <div class="rule" id="r-crate.main.restriction">
<a class="rule-link" href="#r-crate.main.restriction" title="crate.main.restriction"><span>[crate<wbr>.main<wbr>.restriction]</wbr></wbr></span></a> </div> <p>If a <code>main</code> function is present, it must take no arguments, must not declare any <a href="trait-bounds">trait or lifetime bounds</a>, must not have any <a href="items/generics#where-clauses">where clauses</a>, and its return type must implement the <a href="../std/process/trait.termination"><code>Termination</code></a> trait.</p> <pre data-language="rust">fn main() {}</pre> <pre data-language="rust">fn main() -&gt; ! {
    std::process::exit(0);
}</pre> <pre data-language="rust">fn main() -&gt; impl std::process::Termination {
    std::process::ExitCode::SUCCESS
}</pre> <div class="rule" id="r-crate.main.import">
<a class="rule-link" href="#r-crate.main.import" title="crate.main.import"><span>[crate<wbr>.main<wbr>.import]</wbr></wbr></span></a> </div> <p>The <code>main</code> function may be an import, e.g. from an external crate or from the current one.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
mod foo {
    pub fn bar() {
        println!("Hello, world!");
    }
}
use foo::bar as main;
}</pre> <div class="alert alert-note"> <blockquote> <p class="alert-title">Note</p> <p>Types with implementations of <a href="../std/process/trait.termination"><code>Termination</code></a> in the standard library include:</p> <ul> <li><code>()</code></li> <li><a href="types/never"><code>!</code></a></li> <li><a href="https://doc.rust-lang.org/core/convert/enum.Infallible.html"><code>Infallible</code></a></li> <li><a href="../std/process/struct.exitcode"><code>ExitCode</code></a></li> <li><code>Result&lt;T, E&gt; where T: Termination, E: Debug</code></li> </ul> </blockquote> </div>  <div class="rule" id="r-crate.uncaught-foreign-unwinding">
<a class="rule-link" href="#r-crate.uncaught-foreign-unwinding" title="crate.uncaught-foreign-unwinding"><span>[crate<wbr>.uncaught-foreign-unwinding]</wbr></span></a> </div> <h3 id="uncaught-foreign-unwinding">Uncaught foreign unwinding</h3> <p>When a “foreign” unwind (e.g. an exception thrown from C++ code, or a <code>panic!</code> in Rust code using a different panic handler) propagates beyond the <code>main</code> function, the process will be safely terminated. This may take the form of an abort, in which case it is not guaranteed that any <code>Drop</code> calls will be executed, and the error output may be less informative than if the runtime had been terminated by a “native” Rust <code>panic</code>.</p> <p>For more information, see the <a href="panic#unwinding-across-ffi-boundaries">panic documentation</a>.</p> <div class="rule" id="r-crate.no_main">
<a class="rule-link" href="#r-crate.no_main" title="crate.no_main"><span>[crate<wbr>.no_main]</wbr></span></a> </div> <h3 id="the-no_main-attribute">The <code id="">no_main</code> attribute</h3> <p>The <em><code>no_main</code> <a href="attributes">attribute</a></em> may be applied at the crate level to disable emitting the <code>main</code> symbol for an executable binary. This is useful when some other object being linked to defines <code>main</code>.</p> <div class="rule" id="r-crate.crate_name">
<a class="rule-link" href="#r-crate.crate_name" title="crate.crate_name"><span>[crate<wbr>.crate_name]</wbr></span></a> </div> <h2 id="the-crate_name-attribute">The <code id="">crate_name</code> attribute</h2> <div class="rule" id="r-crate.crate_name.general">
<a class="rule-link" href="#r-crate.crate_name.general" title="crate.crate_name.general"><span>[crate<wbr>.crate_name<wbr>.general]</wbr></wbr></span></a> </div> <p>The <em><code>crate_name</code> <a href="attributes">attribute</a></em> may be applied at the crate level to specify the name of the crate with the <a href="attributes#grammar-MetaNameValueStr">MetaNameValueStr</a> syntax.</p> <pre data-language="rust">#![allow(unused)]
#![crate_name = "mycrate"]
fn main() {
}</pre> <div class="rule" id="r-crate.crate_name.restriction">
<a class="rule-link" href="#r-crate.crate_name.restriction" title="crate.crate_name.restriction"><span>[crate<wbr>.crate_name<wbr>.restriction]</wbr></wbr></span></a> </div> <p>The crate name must not be empty, and must only contain <a href="../std/primitive.char#method.is_alphanumeric">Unicode alphanumeric</a> or <code>_</code> (U+005F) characters.</p>   <ol class="footnote-definition">
<li id="footnote-phase-distinction"> <p>This distinction would also exist in an interpreter. Static checks like syntactic analysis, type checking, and lints should happen before the program is executed regardless of when it is executed. <a href="#fr-phase-distinction-1">↩</a></p> </li> <li id="footnote-cratesourcefile"> <p>A crate is somewhat analogous to an <em>assembly</em> in the ECMA-335 CLI model, a <em>library</em> in the SML/NJ Compilation Manager, a <em>unit</em> in the Owens and Flatt module system, or a <em>configuration</em> in Mesa. <a href="#fr-cratesourcefile-1">↩</a></p> </li> </ol><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/reference/crates-and-source-files.html" class="_attribution-link">https://doc.rust-lang.org/reference/crates-and-source-files.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="../assets/index.js"></script>
</body>

</html>