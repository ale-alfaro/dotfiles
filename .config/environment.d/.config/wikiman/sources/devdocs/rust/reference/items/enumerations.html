<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>.. Discriminants</title>
    
    <link rel="preload" href="../../assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="../../application.css" />
    <link rel="stylesheet" type="text/css" href="../../assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="reference/items/enumerations" prefix="../../" listing-src="../../navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _rust"><h1 class="rule" id="r-items.enum">
<a class="rule-link" href="#r-items.enum" title="items.enum"><span>[items<wbr>.enum]</wbr></span></a> </h1> <h1 id="enumerations">Enumerations</h1> <div class="rule" id="r-items.enum.syntax">
<a class="rule-link" href="#r-items.enum.syntax" title="items.enum.syntax"><span>[items<wbr>.enum<wbr>.syntax]</wbr></wbr></span></a> </div> <div class="grammar-container"> <p><strong><sup>Syntax</sup></strong> <br> <span class="grammar-text grammar-production" id="grammar-Enumeration" onclick="show_railroad()"><a href="enumerations#railroad-Enumeration">Enumeration</a></span> → <br> <span class="grammar-literal">enum</span> <span class="grammar-text"><a href="../identifiers#grammar-IDENTIFIER">IDENTIFIER</a></span> <span class="grammar-text"><a href="generics#grammar-GenericParams">GenericParams</a></span><sup>?</sup> <span class="grammar-text"><a href="generics#grammar-WhereClause">WhereClause</a></span><sup>?</sup> <span class="grammar-literal">{</span> <span class="grammar-text"><a href="enumerations#grammar-EnumItems">EnumItems</a></span><sup>?</sup> <span class="grammar-literal">}</span></p> <p><span class="grammar-text grammar-production" id="grammar-EnumItems" onclick="show_railroad()"><a href="enumerations#railroad-EnumItems">EnumItems</a></span> → <span class="grammar-text"><a href="enumerations#grammar-EnumItem">EnumItem</a></span> ( <span class="grammar-literal">,</span> <span class="grammar-text"><a href="enumerations#grammar-EnumItem">EnumItem</a></span> )<sup>*</sup> <span class="grammar-literal">,</span><sup>?</sup></p> <p><span class="grammar-text grammar-production" id="grammar-EnumItem" onclick="show_railroad()"><a href="enumerations#railroad-EnumItem">EnumItem</a></span> → <br> <span class="grammar-text"><a href="../attributes#grammar-OuterAttribute">OuterAttribute</a></span><sup>*</sup> <span class="grammar-text"><a href="../visibility-and-privacy#grammar-Visibility">Visibility</a></span><sup>?</sup> <br> <span class="grammar-text"><a href="../identifiers#grammar-IDENTIFIER">IDENTIFIER</a></span> ( <span class="grammar-text"><a href="enumerations#grammar-EnumItemTuple">EnumItemTuple</a></span> | <span class="grammar-text"><a href="enumerations#grammar-EnumItemStruct">EnumItemStruct</a></span> )<sup>?</sup> <span class="grammar-text"><a href="enumerations#grammar-EnumItemDiscriminant">EnumItemDiscriminant</a></span><sup>?</sup></p> <p><span class="grammar-text grammar-production" id="grammar-EnumItemTuple" onclick="show_railroad()"><a href="enumerations#railroad-EnumItemTuple">EnumItemTuple</a></span> → <span class="grammar-literal">(</span> <span class="grammar-text"><a href="structs#grammar-TupleFields">TupleFields</a></span><sup>?</sup> <span class="grammar-literal">)</span></p> <p><span class="grammar-text grammar-production" id="grammar-EnumItemStruct" onclick="show_railroad()"><a href="enumerations#railroad-EnumItemStruct">EnumItemStruct</a></span> → <span class="grammar-literal">{</span> <span class="grammar-text"><a href="structs#grammar-StructFields">StructFields</a></span><sup>?</sup> <span class="grammar-literal">}</span></p> <p><span class="grammar-text grammar-production" id="grammar-EnumItemDiscriminant" onclick="show_railroad()"><a href="enumerations#railroad-EnumItemDiscriminant">EnumItemDiscriminant</a></span> → <span class="grammar-literal">=</span> <span class="grammar-text"><a href="../expressions#grammar-Expression">Expression</a></span></p> <p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p> </div> <div class="grammar-railroad grammar-hidden"> <div style="width: 806px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-Enumeration">
<svg class="railroad" viewbox="0 0 806 87" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="enumerations.html#grammar-Enumeration"> <text class="comment" x="53" y="25"> Enumeration</text> </a> <g class="sequence">  <g class="sequence"> <g class="terminal">  <text x="61" y="71"> enum</text> </g> <a class="link" xlink:href="../identifiers.html#railroad-IDENTIFIER"> <g class="nonterminal">  <text x="147" y="71"> IDENTIFIER</text> </g> </a> <g class="optional">  <a class="link" xlink:href="generics.html#railroad-GenericParams"> <g class="nonterminal">  <text x="293" y="71"> GenericParams</text> </g> </a> </g> <g class="optional">  <a class="link" xlink:href="generics.html#railroad-WhereClause"> <g class="nonterminal">  <text x="467" y="71"> WhereClause</text> </g> </a> </g> <g class="terminal">  <text x="569" y="71"> {</text> </g> <g class="optional">  <a class="link" xlink:href="enumerations.html#railroad-EnumItems"> <g class="nonterminal">  <text x="663" y="71"> EnumItems</text> </g> </a> </g> <g class="terminal">  <text x="757" y="71"> }</text> </g>       </g>    </g> </g> </svg> </div> <div style="width: 444px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-EnumItems">
<svg class="railroad" viewbox="0 0 444 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="enumerations.html#grammar-EnumItems"> <text class="comment" x="46" y="25"> EnumItems</text> </a> <g class="sequence">  <g class="sequence"> <a class="link" xlink:href="enumerations.html#railroad-EnumItem"> <g class="nonterminal">  <text x="77" y="71"> EnumItem</text> </g> </a> <g class="optional">  <g class="repeat">   <g class="sequence"> <g class="terminal">  <text x="179" y="71"> ,</text> </g> <a class="link" xlink:href="enumerations.html#railroad-EnumItem"> <g class="nonterminal">  <text x="245" y="71"> EnumItem</text> </g> </a>  </g> </g> </g> <g class="optional">  <g class="terminal">  <text x="371" y="71"> ,</text> </g> </g>   </g>    </g> </g> </svg> </div> <div style="width: 690px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-EnumItem">
<svg class="railroad" viewbox="0 0 690 192" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="enumerations.html#grammar-EnumItem"> <text class="comment" x="43" y="25"> EnumItem</text> </a> <g class="sequence">  <g class="stack">   <g class="sequence"> <g class="optional">  <g class="repeat">   <a class="link" xlink:href="../attributes.html#railroad-OuterAttribute"> <g class="nonterminal">  <text x="149" y="71"> OuterAttribute</text> </g> </a> </g> </g> <g class="optional">  <a class="link" xlink:href="../visibility-and-privacy.html#railroad-Visibility"> <g class="nonterminal">  <text x="335" y="71"> Visibility</text> </g> </a> </g>  </g>  <g class="sequence"> <a class="link" xlink:href="../identifiers.html#railroad-IDENTIFIER"> <g class="nonterminal">  <text x="97" y="143"> IDENTIFIER</text> </g> </a> <g class="optional">  <g class="choice">  <a class="link" xlink:href="enumerations.html#railroad-EnumItemTuple"> <g class="nonterminal">  <text x="267" y="143"> EnumItemTuple</text> </g> </a>   <a class="link" xlink:href="enumerations.html#railroad-EnumItemStruct"> <g class="nonterminal">  <text x="271" y="176"> EnumItemStruct</text> </g> </a> </g> </g> <g class="optional">  <a class="link" xlink:href="enumerations.html#railroad-EnumItemDiscriminant"> <g class="nonterminal">  <text x="513" y="143"> EnumItemDiscriminant</text> </g> </a> </g>   </g> </g>    </g> </g> </svg> </div> <div style="width: 302px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-EnumItemTuple">
<svg class="railroad" viewbox="0 0 302 87" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="enumerations.html#grammar-EnumItemTuple"> <text class="comment" x="60" y="25"> EnumItemTuple</text> </a> <g class="sequence">  <g class="sequence"> <g class="terminal">  <text x="49" y="71"> (</text> </g> <g class="optional">  <a class="link" xlink:href="structs.html#railroad-TupleFields"> <g class="nonterminal">  <text x="151" y="71"> TupleFields</text> </g> </a> </g> <g class="terminal">  <text x="253" y="71"> )</text> </g>   </g>    </g> </g> </svg> </div> <div style="width: 310px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-EnumItemStruct">
<svg class="railroad" viewbox="0 0 310 87" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="enumerations.html#grammar-EnumItemStruct"> <text class="comment" x="64" y="25"> EnumItemStruct</text> </a> <g class="sequence">  <g class="sequence"> <g class="terminal">  <text x="49" y="71"> {</text> </g> <g class="optional">  <a class="link" xlink:href="structs.html#railroad-StructFields"> <g class="nonterminal">  <text x="155" y="71"> StructFields</text> </g> </a> </g> <g class="terminal">  <text x="261" y="71"> }</text> </g>   </g>    </g> </g> </svg> </div> <div style="width: 208px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-EnumItemDiscriminant">
<svg class="railroad" viewbox="0 0 208 74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="enumerations.html#grammar-EnumItemDiscriminant"> <text class="comment" x="88" y="25"> EnumItemDiscriminant</text> </a> <g class="sequence">  <g class="sequence"> <g class="terminal">  <text x="49" y="58"> =</text> </g> <a class="link" xlink:href="../expressions.html#railroad-Expression"> <g class="nonterminal">  <text x="123" y="58"> Expression</text> </g> </a>  </g>    </g> </g> </svg> </div> </div> <div class="rule" id="r-items.enum.intro">
<a class="rule-link" href="#r-items.enum.intro" title="items.enum.intro"><span>[items<wbr>.enum<wbr>.intro]</wbr></wbr></span></a> </div> <p>An <em>enumeration</em>, also referred to as an <em>enum</em>, is a simultaneous definition of a nominal <a href="../types/enum">enumerated type</a> as well as a set of <em>constructors</em>, that can be used to create or pattern-match values of the corresponding enumerated type.</p> <div class="rule" id="r-items.enum.decl">
<a class="rule-link" href="#r-items.enum.decl" title="items.enum.decl"><span>[items<wbr>.enum<wbr>.decl]</wbr></wbr></span></a> </div> <p>Enumerations are declared with the keyword <code>enum</code>.</p> <div class="rule" id="r-items.enum.namespace">
<a class="rule-link" href="#r-items.enum.namespace" title="items.enum.namespace"><span>[items<wbr>.enum<wbr>.namespace]</wbr></wbr></span></a> </div> <p>The <code>enum</code> declaration defines the enumeration type in the <a href="../names/namespaces">type namespace</a> of the module or block where it is located.</p> <p>An example of an <code>enum</code> item and its use:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum Animal {
    Dog,
    Cat,
}

let mut a: Animal = Animal::Dog;
a = Animal::Cat;
}</pre> <div class="rule" id="r-items.enum.constructor">
<a class="rule-link" href="#r-items.enum.constructor" title="items.enum.constructor"><span>[items<wbr>.enum<wbr>.constructor]</wbr></wbr></span></a> </div> <p>Enum constructors can have either named or unnamed fields:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum Animal {
    Dog(String, f64),
    Cat { name: String, weight: f64 },
}

let mut a: Animal = Animal::Dog("Cocoa".to_string(), 37.2);
a = Animal::Cat { name: "Spotty".to_string(), weight: 2.7 };
}</pre> <p>In this example, <code>Cat</code> is a <em>struct-like enum variant</em>, whereas <code>Dog</code> is simply called an enum variant.</p> <div class="rule" id="r-items.enum.fieldless">
<a class="rule-link" href="#r-items.enum.fieldless" title="items.enum.fieldless"><span>[items<wbr>.enum<wbr>.fieldless]</wbr></wbr></span></a> </div> <p>An enum where no constructors contain fields are called a <em><span id="field-less-enum">field-less enum</span></em>. For example, this is a fieldless enum:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum Fieldless {
    Tuple(),
    Struct{},
    Unit,
}
}</pre> <div class="rule" id="r-items.enum.unit-only">
<a class="rule-link" href="#r-items.enum.unit-only" title="items.enum.unit-only"><span>[items<wbr>.enum<wbr>.unit-only]</wbr></wbr></span></a> </div> <p>If a field-less enum only contains unit variants, the enum is called an <em><span id="unit-only-enum">unit-only enum</span></em>. For example:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum Enum {
    Foo = 3,
    Bar = 2,
    Baz = 1,
}
}</pre> <div class="rule" id="r-items.enum.constructor-names">
<a class="rule-link" href="#r-items.enum.constructor-names" title="items.enum.constructor-names"><span>[items<wbr>.enum<wbr>.constructor-names]</wbr></wbr></span></a> </div> <p>Variant constructors are similar to <a href="structs">struct</a> definitions, and can be referenced by a path from the enumeration name, including in <a href="use-declarations">use declarations</a>.</p> <div class="rule" id="r-items.enum.constructor-namespace">
<a class="rule-link" href="#r-items.enum.constructor-namespace" title="items.enum.constructor-namespace"><span>[items<wbr>.enum<wbr>.constructor-namespace]</wbr></wbr></span></a> </div> <p>Each variant defines its type in the <a href="../names/namespaces">type namespace</a>, though that type cannot be used as a type specifier. Tuple-like and unit-like variants also define a constructor in the <a href="../names/namespaces">value namespace</a>.</p> <div class="rule" id="r-items.enum.struct-expr">
<a class="rule-link" href="#r-items.enum.struct-expr" title="items.enum.struct-expr"><span>[items<wbr>.enum<wbr>.struct-expr]</wbr></wbr></span></a> </div> <p>A struct-like variant can be instantiated with a <a href="../expressions/struct-expr">struct expression</a>.</p> <div class="rule" id="r-items.enum.tuple-expr">
<a class="rule-link" href="#r-items.enum.tuple-expr" title="items.enum.tuple-expr"><span>[items<wbr>.enum<wbr>.tuple-expr]</wbr></wbr></span></a> </div> <p>A tuple-like variant can be instantiated with a <a href="../expressions/call-expr">call expression</a> or a <a href="../expressions/struct-expr">struct expression</a>.</p> <div class="rule" id="r-items.enum.path-expr">
<a class="rule-link" href="#r-items.enum.path-expr" title="items.enum.path-expr"><span>[items<wbr>.enum<wbr>.path-expr]</wbr></wbr></span></a> </div> <p>A unit-like variant can be instantiated with a <a href="../expressions/path-expr">path expression</a> or a <a href="../expressions/struct-expr">struct expression</a>. For example:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum Examples {
    UnitLike,
    TupleLike(i32),
    StructLike { value: i32 },
}

use Examples::*; // Creates aliases to all variants.
let x = UnitLike; // Path expression of the const item.
let x = UnitLike {}; // Struct expression.
let y = TupleLike(123); // Call expression.
let y = TupleLike { 0: 123 }; // Struct expression using integer field names.
let z = StructLike { value: 123 }; // Struct expression.
}</pre>  <div class="rule" id="r-items.enum.discriminant">
<a class="rule-link" href="#r-items.enum.discriminant" title="items.enum.discriminant"><span>[items<wbr>.enum<wbr>.discriminant]</wbr></wbr></span></a> </div> <h2 id="discriminants">Discriminants</h2> <div class="rule" id="r-items.enum.discriminant.intro">
<a class="rule-link" href="#r-items.enum.discriminant.intro" title="items.enum.discriminant.intro"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.intro]</wbr></wbr></wbr></span></a> </div> <p>Each enum instance has a <em>discriminant</em>: an integer logically associated to it that is used to determine which variant it holds.</p> <div class="rule" id="r-items.enum.discriminant.repr-rust">
<a class="rule-link" href="#r-items.enum.discriminant.repr-rust" title="items.enum.discriminant.repr-rust"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.repr-rust]</wbr></wbr></wbr></span></a> </div> <p>Under the <a href="../type-layout#the-rust-representation"><code>Rust</code> representation</a>, the discriminant is interpreted as an <code>isize</code> value. However, the compiler is allowed to use a smaller type (or another means of distinguishing variants) in its actual memory layout.</p> <h3 id="assigning-discriminant-values">Assigning discriminant values</h3> <div class="rule" id="r-items.enum.discriminant.explicit">
<a class="rule-link" href="#r-items.enum.discriminant.explicit" title="items.enum.discriminant.explicit"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.explicit]</wbr></wbr></wbr></span></a> </div> <h4 id="explicit-discriminants">Explicit discriminants</h4> <div class="rule" id="r-items.enum.discriminant.explicit.intro">
<a class="rule-link" href="#r-items.enum.discriminant.explicit.intro" title="items.enum.discriminant.explicit.intro"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.explicit<wbr>.intro]</wbr></wbr></wbr></wbr></span></a> </div> <p>In two circumstances, the discriminant of a variant may be explicitly set by following the variant name with <code>=</code> and a <a href="../const_eval#constant-expressions">constant expression</a>:</p> <div class="rule" id="r-items.enum.discriminant.explicit.unit-only">
<a class="rule-link" href="#r-items.enum.discriminant.explicit.unit-only" title="items.enum.discriminant.explicit.unit-only"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.explicit<wbr>.unit-only]</wbr></wbr></wbr></wbr></span></a> </div> <ol> <li>if the enumeration is “<a href="#unit-only-enum">unit-only</a>”.</li> </ol> <div class="rule" id="r-items.enum.discriminant.explicit.primitive-repr">
<a class="rule-link" href="#r-items.enum.discriminant.explicit.primitive-repr" title="items.enum.discriminant.explicit.primitive-repr"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.explicit<wbr>.primitive-repr]</wbr></wbr></wbr></wbr></span></a> </div> <ol start="2"> <li> <p>if a <a href="../type-layout#primitive-representations">primitive representation</a> is used. For example:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
#[repr(u8)]
enum Enum {
    Unit = 3,
    Tuple(u16),
    Struct {
        a: u8,
        b: u16,
    } = 1,
}
}</pre> </li> </ol> <div class="rule" id="r-items.enum.discriminant.implicit">
<a class="rule-link" href="#r-items.enum.discriminant.implicit" title="items.enum.discriminant.implicit"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.implicit]</wbr></wbr></wbr></span></a> </div> <h4 id="implicit-discriminants">Implicit discriminants</h4> <p>If a discriminant for a variant is not specified, then it is set to one higher than the discriminant of the previous variant in the declaration. If the discriminant of the first variant in the declaration is unspecified, then it is set to zero.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum Foo {
    Bar,            // 0
    Baz = 123,      // 123
    Quux,           // 124
}

let baz_discriminant = Foo::Baz as u32;
assert_eq!(baz_discriminant, 123);
}</pre> <div class="rule" id="r-items.enum.discriminant.restrictions">
<a class="rule-link" href="#r-items.enum.discriminant.restrictions" title="items.enum.discriminant.restrictions"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.restrictions]</wbr></wbr></wbr></span></a> </div> <h4 id="restrictions">Restrictions</h4> <div class="rule" id="r-items.enum.discriminant.restrictions.same-discriminant">
<a class="rule-link" href="#r-items.enum.discriminant.restrictions.same-discriminant" title="items.enum.discriminant.restrictions.same-discriminant"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.restrictions<wbr>.same-discriminant]</wbr></wbr></wbr></wbr></span></a> </div> <p>It is an error when two variants share the same discriminant.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum SharedDiscriminantError {
    SharedA = 1,
    SharedB = 1
}

enum SharedDiscriminantError2 {
    Zero,       // 0
    One,        // 1
    OneToo = 1  // 1 (collision with previous!)
}
}</pre> <div class="rule" id="r-items.enum.discriminant.restrictions.above-max-discriminant">
<a class="rule-link" href="#r-items.enum.discriminant.restrictions.above-max-discriminant" title="items.enum.discriminant.restrictions.above-max-discriminant"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.restrictions<wbr>.above-max-discriminant]</wbr></wbr></wbr></wbr></span></a> </div> <p>It is also an error to have an unspecified discriminant where the previous discriminant is the maximum value for the size of the discriminant.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
#[repr(u8)]
enum OverflowingDiscriminantError {
    Max = 255,
    MaxPlusOne // Would be 256, but that overflows the enum.
}

#[repr(u8)]
enum OverflowingDiscriminantError2 {
    MaxMinusOne = 254, // 254
    Max,               // 255
    MaxPlusOne         // Would be 256, but that overflows the enum.
}
}</pre> <h3 id="accessing-discriminant">Accessing discriminant</h3> <h4 id="via-memdiscriminant">Via <code id="">mem::discriminant</code>
</h4> <div class="rule" id="r-items.enum.discriminant.access-opaque">
<a class="rule-link" href="#r-items.enum.discriminant.access-opaque" title="items.enum.discriminant.access-opaque"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.access-opaque]</wbr></wbr></wbr></span></a> </div> <p><a href="https://doc.rust-lang.org/core/mem/fn.discriminant.html"><code>std::mem::discriminant</code></a> returns an opaque reference to the discriminant of an enum value which can be compared. This cannot be used to get the value of the discriminant.</p> <div class="rule" id="r-items.enum.discriminant.coercion">
<a class="rule-link" href="#r-items.enum.discriminant.coercion" title="items.enum.discriminant.coercion"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.coercion]</wbr></wbr></wbr></span></a> </div> <h4 id="casting">Casting</h4> <div class="rule" id="r-items.enum.discriminant.coercion.intro">
<a class="rule-link" href="#r-items.enum.discriminant.coercion.intro" title="items.enum.discriminant.coercion.intro"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.coercion<wbr>.intro]</wbr></wbr></wbr></wbr></span></a> </div> <p>If an enumeration is <a href="#unit-only-enum">unit-only</a> (with no tuple and struct variants), then its discriminant can be directly accessed with a <a href="../expressions/operator-expr#semantics">numeric cast</a>; e.g.:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum Enum {
    Foo,
    Bar,
    Baz,
}

assert_eq!(0, Enum::Foo as isize);
assert_eq!(1, Enum::Bar as isize);
assert_eq!(2, Enum::Baz as isize);
}</pre> <div class="rule" id="r-items.enum.discriminant.coercion.fieldless">
<a class="rule-link" href="#r-items.enum.discriminant.coercion.fieldless" title="items.enum.discriminant.coercion.fieldless"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.coercion<wbr>.fieldless]</wbr></wbr></wbr></wbr></span></a> </div> <p><a href="#field-less-enum">Field-less enums</a> can be casted if they do not have explicit discriminants, or where only unit variants are explicit.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum Fieldless {
    Tuple(),
    Struct{},
    Unit,
}

assert_eq!(0, Fieldless::Tuple() as isize);
assert_eq!(1, Fieldless::Struct{} as isize);
assert_eq!(2, Fieldless::Unit as isize);

#[repr(u8)]
enum FieldlessWithDiscriminants {
    First = 10,
    Tuple(),
    Second = 20,
    Struct{},
    Unit,
}

assert_eq!(10, FieldlessWithDiscriminants::First as u8);
assert_eq!(11, FieldlessWithDiscriminants::Tuple() as u8);
assert_eq!(20, FieldlessWithDiscriminants::Second as u8);
assert_eq!(21, FieldlessWithDiscriminants::Struct{} as u8);
assert_eq!(22, FieldlessWithDiscriminants::Unit as u8);
}</pre> <h4 id="pointer-casting">Pointer casting</h4> <div class="rule" id="r-items.enum.discriminant.access-memory">
<a class="rule-link" href="#r-items.enum.discriminant.access-memory" title="items.enum.discriminant.access-memory"><span>[items<wbr>.enum<wbr>.discriminant<wbr>.access-memory]</wbr></wbr></wbr></span></a> </div> <p>If the enumeration specifies a <a href="../type-layout#primitive-representations">primitive representation</a>, then the discriminant may be reliably accessed via unsafe pointer casting:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
#[repr(u8)]
enum Enum {
    Unit,
    Tuple(bool),
    Struct{a: bool},
}

impl Enum {
    fn discriminant(&amp;self) -&gt; u8 {
        unsafe { *(self as *const Self as *const u8) }
    }
}

let unit_like = Enum::Unit;
let tuple_like = Enum::Tuple(true);
let struct_like = Enum::Struct{a: false};

assert_eq!(0, unit_like.discriminant());
assert_eq!(1, tuple_like.discriminant());
assert_eq!(2, struct_like.discriminant());
}</pre> <div class="rule" id="r-items.enum.empty">
<a class="rule-link" href="#r-items.enum.empty" title="items.enum.empty"><span>[items<wbr>.enum<wbr>.empty]</wbr></wbr></span></a> </div> <h2 id="zero-variant-enums">Zero-variant enums</h2> <div class="rule" id="r-items.enum.empty.intro">
<a class="rule-link" href="#r-items.enum.empty.intro" title="items.enum.empty.intro"><span>[items<wbr>.enum<wbr>.empty<wbr>.intro]</wbr></wbr></wbr></span></a> </div> <p>Enums with zero variants are known as <em>zero-variant enums</em>. As they have no valid values, they cannot be instantiated.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum ZeroVariants {}
}</pre> <div class="rule" id="r-items.enum.empty.uninhabited">
<a class="rule-link" href="#r-items.enum.empty.uninhabited" title="items.enum.empty.uninhabited"><span>[items<wbr>.enum<wbr>.empty<wbr>.uninhabited]</wbr></wbr></wbr></span></a> </div> <p>Zero-variant enums are equivalent to the <a href="../types/never">never type</a>, but they cannot be coerced into other types.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum ZeroVariants {}
let x: ZeroVariants = panic!();
let y: u32 = x; // mismatched type error
}</pre> <div class="rule" id="r-items.enum.variant-visibility">
<a class="rule-link" href="#r-items.enum.variant-visibility" title="items.enum.variant-visibility"><span>[items<wbr>.enum<wbr>.variant-visibility]</wbr></wbr></span></a> </div> <h2 id="variant-visibility">Variant visibility</h2> <p>Enum variants syntactically allow a <a href="../visibility-and-privacy#grammar-Visibility">Visibility</a> annotation, but this is rejected when the enum is validated. This allows items to be parsed with a unified syntax across different contexts where they are used.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
macro_rules! mac_variant {
    ($vis:vis $name:ident) =&gt; {
        enum $name {
            $vis Unit,

            $vis Tuple(u8, u16),

            $vis Struct { f: u8 },
        }
    }
}

// Empty `vis` is allowed.
mac_variant! { E }

// This is allowed, since it is removed before being validated.
#[cfg(false)]
enum E {
    pub U,
    pub(crate) T(u8),
    pub(super) T { f: String }
}
}</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/reference/items/enumerations.html" class="_attribution-link">https://doc.rust-lang.org/reference/items/enumerations.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="../../assets/index.js"></script>
</body>

</html>