<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>.. if let patterns</title>
    
    <link rel="preload" href="../../assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="../../application.css" />
    <link rel="stylesheet" type="text/css" href="../../assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="reference/expressions/if-expr" prefix="../../" listing-src="../../navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _rust"><h1 class="rule" id="r-expr.if">
<a class="rule-link" href="#r-expr.if" title="expr.if"><span>[expr<wbr>.if]</wbr></span></a> </h1> <h1 id="if-expressions">
<code id="">if</code> expressions</h1> <div class="rule" id="r-expr.if.syntax">
<a class="rule-link" href="#r-expr.if.syntax" title="expr.if.syntax"><span>[expr<wbr>.if<wbr>.syntax]</wbr></wbr></span></a> </div> <div class="grammar-container"> <p><strong><sup>Syntax</sup></strong> <br> <span class="grammar-text grammar-production" id="grammar-IfExpression" onclick="show_railroad()"><a href="if-expr#railroad-IfExpression">IfExpression</a></span> → <br> <span class="grammar-literal">if</span> <span class="grammar-text"><a href="if-expr#grammar-Conditions">Conditions</a></span> <span class="grammar-text"><a href="block-expr#grammar-BlockExpression">BlockExpression</a></span> <br> ( <span class="grammar-literal">else</span> ( <span class="grammar-text"><a href="block-expr#grammar-BlockExpression">BlockExpression</a></span> | <span class="grammar-text"><a href="if-expr#grammar-IfExpression">IfExpression</a></span> ) )<sup>?</sup></p> <p><span class="grammar-text grammar-production" id="grammar-Conditions" onclick="show_railroad()"><a href="if-expr#railroad-Conditions">Conditions</a></span> → <br> <span class="grammar-text"><a href="../expressions#grammar-Expression">Expression</a></span><sub class="grammar-text">except <a href="struct-expr#grammar-StructExpression">StructExpression</a></sub> <br> | <span class="grammar-text"><a href="if-expr#grammar-LetChain">LetChain</a></span></p> <p><span class="grammar-text grammar-production" id="grammar-LetChain" onclick="show_railroad()"><a href="if-expr#railroad-LetChain">LetChain</a></span> → <span class="grammar-text"><a href="if-expr#grammar-LetChainCondition">LetChainCondition</a></span> ( <span class="grammar-literal">&amp;&amp;</span> <span class="grammar-text"><a href="if-expr#grammar-LetChainCondition">LetChainCondition</a></span> )<sup>*</sup></p> <p><span class="grammar-text grammar-production" id="grammar-LetChainCondition" onclick="show_railroad()"><a href="if-expr#railroad-LetChainCondition">LetChainCondition</a></span> → <br> <span class="grammar-text"><a href="../expressions#grammar-Expression">Expression</a></span><sub class="grammar-text">except <a href="if-expr#grammar-ExcludedConditions">ExcludedConditions</a></sub> <br> | <span class="grammar-text"><a href="../attributes#grammar-OuterAttribute">OuterAttribute</a></span><sup>*</sup> <span class="grammar-literal">let</span> <span class="grammar-text"><a href="../patterns#grammar-Pattern">Pattern</a></span> <span class="grammar-literal">=</span> <span class="grammar-text"><a href="match-expr#grammar-Scrutinee">Scrutinee</a></span><sub class="grammar-text">except <a href="if-expr#grammar-ExcludedConditions">ExcludedConditions</a></sub></p> <p><span class="grammar-text grammar-production" id="grammar-ExcludedConditions" onclick="show_railroad()"><a href="if-expr#railroad-ExcludedConditions">ExcludedConditions</a></span> → <br> <span class="grammar-text"><a href="struct-expr#grammar-StructExpression">StructExpression</a></span> <br> | <span class="grammar-text"><a href="operator-expr#grammar-LazyBooleanExpression">LazyBooleanExpression</a></span> <br> | <span class="grammar-text"><a href="range-expr#grammar-RangeExpr">RangeExpr</a></span> <br> | <span class="grammar-text"><a href="range-expr#grammar-RangeFromExpr">RangeFromExpr</a></span> <br> | <span class="grammar-text"><a href="range-expr#grammar-RangeInclusiveExpr">RangeInclusiveExpr</a></span> <br> | <span class="grammar-text"><a href="operator-expr#grammar-AssignmentExpression">AssignmentExpression</a></span> <br> | <span class="grammar-text"><a href="operator-expr#grammar-CompoundAssignmentExpression">CompoundAssignmentExpression</a></span></p> <p><button class="grammar-toggle-railroad" type="button" title="Toggle railroad display" onclick="toggle_railroad()">Show Railroad</button></p> </div> <div class="grammar-railroad grammar-hidden"> <div style="width: 674px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-IfExpression">
<svg class="railroad" viewbox="0 0 674 120" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="if-expr.html#grammar-IfExpression"> <text class="comment" x="57" y="25"> IfExpression</text> </a> <g class="sequence">  <g class="sequence"> <g class="terminal">  <text x="53" y="71"> if</text> </g> <a class="link" xlink:href="if-expr.html#railroad-Conditions"> <g class="nonterminal">  <text x="131" y="71"> Conditions</text> </g> </a> <a class="link" xlink:href="block-expr.html#railroad-BlockExpression"> <g class="nonterminal">  <text x="261" y="71"> BlockExpression</text> </g> </a> <g class="optional">  <g class="sequence"> <g class="terminal">  <text x="391" y="71"> else</text> </g> <g class="choice">  <a class="link" xlink:href="block-expr.html#railroad-BlockExpression"> <g class="nonterminal">  <text x="521" y="71"> BlockExpression</text> </g> </a>   <a class="link" xlink:href="if-expr.html#railroad-IfExpression"> <g class="nonterminal">  <text x="509" y="104"> IfExpression</text> </g> </a> </g>  </g> </g>    </g>    </g> </g> </svg> </div> <div style="width: 312px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-Conditions">
<svg class="railroad" viewbox="0 0 312 151" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="if-expr.html#grammar-Conditions"> <text class="comment" x="50" y="25"> Conditions</text> </a> <g class="sequence">  <g class="choice">  <g class="sequence"> <g class="labeledbox">   <text class="comment" x="156" y="65"> except StructExpression</text> <a class="link" xlink:href="../expressions.html#railroad-Expression"> <g class="nonterminal">  <text x="117" y="94"> Expression</text> </g> </a> </g> </g>   <a class="link" xlink:href="if-expr.html#railroad-LetChain"> <g class="nonterminal">  <text x="101" y="135"> LetChain</text> </g> </a> </g>    </g> </g> </svg> </div> <div style="width: 510px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-LetChain">
<svg class="railroad" viewbox="0 0 510 100" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="if-expr.html#grammar-LetChain"> <text class="comment" x="43" y="25"> LetChain</text> </a> <g class="sequence">  <g class="sequence"> <a class="link" xlink:href="if-expr.html#railroad-LetChainCondition"> <g class="nonterminal">  <text x="113" y="71"> LetChainCondition</text> </g> </a> <g class="optional">  <g class="repeat">   <g class="sequence"> <g class="terminal">  <text x="255" y="71"> &amp;&amp;</text> </g> <a class="link" xlink:href="if-expr.html#railroad-LetChainCondition"> <g class="nonterminal">  <text x="361" y="71"> LetChainCondition</text> </g> </a>  </g> </g> </g>  </g>    </g> </g> </svg> </div> <div style="width: 718px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-LetChainCondition">
<svg class="railroad" viewbox="0 0 718 199" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="if-expr.html#grammar-LetChainCondition"> <text class="comment" x="74" y="25"> LetChainCondition</text> </a> <g class="sequence">  <g class="choice">  <g class="sequence"> <g class="labeledbox">   <text class="comment" x="163" y="65"> except ExcludedConditions</text> <a class="link" xlink:href="../expressions.html#railroad-Expression"> <g class="nonterminal">  <text x="117" y="94"> Expression</text> </g> </a> </g> </g>   <g class="sequence"> <g class="optional">  <g class="repeat">   <a class="link" xlink:href="../attributes.html#railroad-OuterAttribute"> <g class="nonterminal">  <text x="161" y="170"> OuterAttribute</text> </g> </a> </g> </g> <g class="terminal">  <text x="295" y="170"> let</text> </g> <a class="link" xlink:href="../patterns.html#railroad-Pattern"> <g class="nonterminal">  <text x="365" y="170"> Pattern</text> </g> </a> <g class="terminal">  <text x="427" y="170"> =</text> </g> <g class="labeledbox">   <text class="comment" x="555" y="141"> except ExcludedConditions</text> <a class="link" xlink:href="match-expr.html#railroad-Scrutinee"> <g class="nonterminal">  <text x="505" y="170"> Scrutinee</text> </g> </a> </g>     </g> </g>    </g> </g> </svg> </div> <div style="width: 370px; height: auto; max-width: 100%; max-height: 100%" class="railroad-production" id="railroad-ExcludedConditions">
<svg class="railroad" viewbox="0 0 370 272" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">  <g class="verticalgrid"> <a class="link" xlink:href="if-expr.html#grammar-ExcludedConditions"> <text class="comment" x="78" y="25"> ExcludedConditions</text> </a> <g class="sequence">  <g class="choice">  <g class="sequence"> <a class="link" xlink:href="struct-expr.html#railroad-StructExpression"> <g class="nonterminal">  <text x="133" y="58"> StructExpression</text> </g> </a> </g>        <g class="sequence"> <a class="link" xlink:href="operator-expr.html#railroad-LazyBooleanExpression"> <g class="nonterminal">  <text x="157" y="91"> LazyBooleanExpression</text> </g> </a> </g>  <g class="sequence"> <a class="link" xlink:href="range-expr.html#railroad-RangeExpr"> <g class="nonterminal">  <text x="105" y="124"> RangeExpr</text> </g> </a> </g>  <g class="sequence"> <a class="link" xlink:href="range-expr.html#railroad-RangeFromExpr"> <g class="nonterminal">  <text x="121" y="157"> RangeFromExpr</text> </g> </a> </g>  <g class="sequence"> <a class="link" xlink:href="range-expr.html#railroad-RangeInclusiveExpr"> <g class="nonterminal">  <text x="141" y="190"> RangeInclusiveExpr</text> </g> </a> </g>  <g class="sequence"> <a class="link" xlink:href="operator-expr.html#railroad-AssignmentExpression"> <g class="nonterminal">  <text x="153" y="223"> AssignmentExpression</text> </g> </a> </g>  <a class="link" xlink:href="operator-expr.html#railroad-CompoundAssignmentExpression"> <g class="nonterminal">  <text x="185" y="256"> CompoundAssignmentExpression</text> </g> </a> </g>    </g> </g> </svg> </div> </div>  <div class="rule" id="r-expr.if.intro">
<a class="rule-link" href="#r-expr.if.intro" title="expr.if.intro"><span>[expr<wbr>.if<wbr>.intro]</wbr></wbr></span></a> </div> <p>The syntax of an <code>if</code> expression is a sequence of one or more condition operands separated by <code>&amp;&amp;</code>, followed by a consequent block, any number of <code>else if</code> conditions and blocks, and an optional trailing <code>else</code> block.</p> <div class="rule" id="r-expr.if.condition">
<a class="rule-link" href="#r-expr.if.condition" title="expr.if.condition"><span>[expr<wbr>.if<wbr>.condition]</wbr></wbr></span></a> </div> <p>Condition operands must be either an <a href="../expressions"><em>Expression</em></a> with a <a href="../types/boolean">boolean type</a> or a conditional <code>let</code> match.</p> <div class="rule" id="r-expr.if.condition-true">
<a class="rule-link" href="#r-expr.if.condition-true" title="expr.if.condition-true"><span>[expr<wbr>.if<wbr>.condition-true]</wbr></wbr></span></a> </div> <p>If all of the condition operands evaluate to <code>true</code> and all of the <code>let</code> patterns successfully match their <a href="../glossary#scrutinee">scrutinee</a>s, the consequent block is executed and any subsequent <code>else if</code> or <code>else</code> block is skipped.</p> <div class="rule" id="r-expr.if.else-if">
<a class="rule-link" href="#r-expr.if.else-if" title="expr.if.else-if"><span>[expr<wbr>.if<wbr>.else-if]</wbr></wbr></span></a> </div> <p>If any condition operand evaluates to <code>false</code> or any <code>let</code> pattern does not match its scrutinee, the consequent block is skipped and any subsequent <code>else if</code> condition is evaluated.</p> <div class="rule" id="r-expr.if.else">
<a class="rule-link" href="#r-expr.if.else" title="expr.if.else"><span>[expr<wbr>.if<wbr>.else]</wbr></wbr></span></a> </div> <p>If all <code>if</code> and <code>else if</code> conditions evaluate to <code>false</code> then any <code>else</code> block is executed.</p> <div class="rule" id="r-expr.if.result">
<a class="rule-link" href="#r-expr.if.result" title="expr.if.result"><span>[expr<wbr>.if<wbr>.result]</wbr></wbr></span></a> </div> <p>An <code>if</code> expression evaluates to the same value as the executed block, or <code>()</code> if no block is evaluated.</p> <div class="rule" id="r-expr.if.type">
<a class="rule-link" href="#r-expr.if.type" title="expr.if.type"><span>[expr<wbr>.if<wbr>.type]</wbr></wbr></span></a> </div> <p>An <code>if</code> expression must have the same type in all situations.</p> <pre data-language="rust">#![allow(unused)]
fn main() {
let x = 3;
if x == 4 {
    println!("x is four");
} else if x == 3 {
    println!("x is three");
} else {
    println!("x is something else");
}

// `if` can be used as an expression.
let y = if 12 * 15 &gt; 150 {
    "Bigger"
} else {
    "Smaller"
};
assert_eq!(y, "Bigger");
}</pre> <div class="rule" id="r-expr.if.let">
<a class="rule-link" href="#r-expr.if.let" title="expr.if.let"><span>[expr<wbr>.if<wbr>.let]</wbr></wbr></span></a> </div> <h2 id="if-let-patterns">
<code id="">if let</code> patterns</h2> <div class="rule" id="r-expr.if.let.intro">
<a class="rule-link" href="#r-expr.if.let.intro" title="expr.if.let.intro"><span>[expr<wbr>.if<wbr>.let<wbr>.intro]</wbr></wbr></wbr></span></a> </div> <p><code>let</code> patterns in an <code>if</code> condition allow binding new variables into scope when the pattern matches successfully.</p> <p>The following examples illustrate bindings using <code>let</code> patterns:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
let dish = ("Ham", "Eggs");

// This body will be skipped because the pattern is refuted.
if let ("Bacon", b) = dish {
    println!("Bacon is served with {}", b);
} else {
    // This block is evaluated instead.
    println!("No bacon will be served");
}

// This body will execute.
if let ("Ham", b) = dish {
    println!("Ham is served with {}", b);
}

if let _ = 5 {
    println!("Irrefutable patterns are always true");
}
}</pre> <div class="rule" id="r-expr.if.let.or-pattern">
<a class="rule-link" href="#r-expr.if.let.or-pattern" title="expr.if.let.or-pattern"><span>[expr<wbr>.if<wbr>.let<wbr>.or-pattern]</wbr></wbr></wbr></span></a> </div> <p>Multiple patterns may be specified with the <code>|</code> operator. This has the same semantics as with <code>|</code> in <a href="match-expr"><code>match</code> expressions</a>:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
enum E {
    X(u8),
    Y(u8),
    Z(u8),
}
let v = E::Y(12);
if let E::X(n) | E::Y(n) = v {
    assert_eq!(n, 12);
}
}</pre> <div class="rule" id="r-expr.if.chains">
<a class="rule-link" href="#r-expr.if.chains" title="expr.if.chains"><span>[expr<wbr>.if<wbr>.chains]</wbr></wbr></span></a> </div> <h2 id="chains-of-conditions">Chains of conditions</h2> <div class="rule" id="r-expr.if.chains.intro">
<a class="rule-link" href="#r-expr.if.chains.intro" title="expr.if.chains.intro"><span>[expr<wbr>.if<wbr>.chains<wbr>.intro]</wbr></wbr></wbr></span></a> </div> <p>Multiple condition operands can be separated with <code>&amp;&amp;</code>.</p> <div class="rule" id="r-expr.if.chains.order">
<a class="rule-link" href="#r-expr.if.chains.order" title="expr.if.chains.order"><span>[expr<wbr>.if<wbr>.chains<wbr>.order]</wbr></wbr></wbr></span></a> </div> <p>Similar to a <code>&amp;&amp;</code> <a href="operator-expr#lazy-boolean-operators"><em>LazyBooleanOperatorExpression</em></a>, each operand is evaluated from left-to-right until an operand evaluates as <code>false</code> or a <code>let</code> match fails, in which case the subsequent operands are not evaluated.</p> <div class="rule" id="r-expr.if.chains.bindings">
<a class="rule-link" href="#r-expr.if.chains.bindings" title="expr.if.chains.bindings"><span>[expr<wbr>.if<wbr>.chains<wbr>.bindings]</wbr></wbr></wbr></span></a> </div> <p>The bindings of each pattern are put into scope to be available for the next condition operand and the consequent block.</p> <p>The following is an example of chaining multiple expressions, mixing <code>let</code> bindings and boolean expressions, and with expressions able to reference pattern bindings from previous expressions:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
fn single() {
    let outer_opt = Some(Some(1i32));

    if let Some(inner_opt) = outer_opt
        &amp;&amp; let Some(number) = inner_opt
        &amp;&amp; number == 1
    {
        println!("Peek a boo");
    }
}
}</pre> <p>The above is equivalent to the following without using chains of conditions:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
fn nested() {
    let outer_opt = Some(Some(1i32));

    if let Some(inner_opt) = outer_opt {
        if let Some(number) = inner_opt {
            if number == 1 {
                println!("Peek a boo");
            }
        }
    }
}
}</pre> <div class="rule" id="r-expr.if.chains.or">
<a class="rule-link" href="#r-expr.if.chains.or" title="expr.if.chains.or"><span>[expr<wbr>.if<wbr>.chains<wbr>.or]</wbr></wbr></wbr></span></a> </div> <p>If any condition operand is a <code>let</code> pattern, then none of the condition operands can be a <code>||</code> <a href="operator-expr#lazy-boolean-operators">lazy boolean operator expression</a> due to ambiguity and precedence with the <code>let</code> scrutinee. If a <code>||</code> expression is needed, then parentheses can be used. For example:</p> <pre data-language="rust">#![allow(unused)]
fn main() {
let foo = Some(123);
let condition1 = true;
let condition2 = false;
// Parentheses are required here.
if let Some(x) = foo &amp;&amp; (condition1 || condition2) { /*...*/ }
}</pre> <div class="rule" id="r-expr.if.edition2024">
<a class="rule-link" href="#r-expr.if.edition2024" title="expr.if.edition2024"><span>[expr<wbr>.if<wbr>.edition2024]</wbr></wbr></span></a> </div> <div class="alert alert-edition"> <blockquote> <p class="alert-title"><span class="alert-title-edition">2024</span> Edition differences</p> <p>Before the 2024 edition, let chains are not supported. That is, the <a href="if-expr#grammar-LetChain">LetChain</a> grammar is not allowed in an <code>if</code> expression.</p> </blockquote> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/reference/expressions/if-expr.html" class="_attribution-link">https://doc.rust-lang.org/reference/expressions/if-expr.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="../../assets/index.js"></script>
</body>

</html>