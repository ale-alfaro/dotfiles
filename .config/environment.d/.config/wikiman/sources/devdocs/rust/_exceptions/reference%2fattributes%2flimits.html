<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>.. The recursion_limit attribute</title>
    
    <link rel="preload" href="../../assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="../../application.css" />
    <link rel="stylesheet" type="text/css" href="../../assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="reference/attributes/limits" prefix="../../" listing-src="../../navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _rust"><h1 class="rule" id="r-attributes.limits">
<a class="rule-link" href="#r-attributes.limits" title="attributes.limits"><span>[attributes<wbr>.limits]</wbr></span></a> </h1> <h1 id="limits">Limits</h1> <p>The following <a href="../attributes">attributes</a> affect compile-time limits.</p> <div class="rule" id="r-attributes.limits.recursion_limit">
<a class="rule-link" href="#r-attributes.limits.recursion_limit" title="attributes.limits.recursion_limit"><span>[attributes<wbr>.limits<wbr>.recursion_limit]</wbr></wbr></span></a> </div> <h2 id="the-recursion_limit-attribute">The <code id="">recursion_limit</code> attribute</h2> <div class="rule" id="r-attributes.limits.recursion_limit.intro">
<a class="rule-link" href="#r-attributes.limits.recursion_limit.intro" title="attributes.limits.recursion_limit.intro"><span>[attributes<wbr>.limits<wbr>.recursion_limit<wbr>.intro]</wbr></wbr></wbr></span></a> </div> <p>The <em><code>recursion_limit</code> attribute</em> may be applied at the <a href="../crates-and-source-files">crate</a> level to set the maximum depth for potentially infinitely-recursive compile-time operations like macro expansion or auto-dereference.</p> <div class="rule" id="r-attributes.limits.recursion_limit.syntax">
<a class="rule-link" href="#r-attributes.limits.recursion_limit.syntax" title="attributes.limits.recursion_limit.syntax"><span>[attributes<wbr>.limits<wbr>.recursion_limit<wbr>.syntax]</wbr></wbr></wbr></span></a> </div> <p>It uses the <a href="../attributes#grammar-MetaNameValueStr">MetaNameValueStr</a> syntax to specify the recursion depth.</p> <div class="alert alert-note"> <blockquote> <p class="alert-title">Note</p> <p>The default in <code>rustc</code> is 128.</p> </blockquote> </div> <pre data-language="rust">#![allow(unused)]
#![recursion_limit = "4"]

fn main() {
macro_rules! a {
    () =&gt; { a!(1); };
    (1) =&gt; { a!(2); };
    (2) =&gt; { a!(3); };
    (3) =&gt; { a!(4); };
    (4) =&gt; { };
}

// This fails to expand because it requires a recursion depth greater than 4.
a!{}
}</pre> <pre data-language="rust">#![allow(unused)]
#![recursion_limit = "1"]

fn main() {
// This fails because it requires two recursive steps to auto-dereference.
(|_: &amp;u8| {})(&amp;&amp;&amp;1);
}</pre> <div class="rule" id="r-attributes.limits.type_length_limit">
<a class="rule-link" href="#r-attributes.limits.type_length_limit" title="attributes.limits.type_length_limit"><span>[attributes<wbr>.limits<wbr>.type_length_limit]</wbr></wbr></span></a> </div> <h2 id="the-type_length_limit-attribute">The <code id="">type_length_limit</code> attribute</h2> <div class="alert alert-note"> <blockquote> <p class="alert-title">Note</p> <p>This limit is only enforced when the nightly <code>-Zenforce-type-length-limit</code> flag is active.</p> <p>For more information, see <a href="https://github.com/rust-lang/rust/pull/127670">https://github.com/rust-lang/rust/pull/127670</a>.</p> </blockquote> </div> <div class="rule" id="r-attributes.limits.type_length_limit.intro">
<a class="rule-link" href="#r-attributes.limits.type_length_limit.intro" title="attributes.limits.type_length_limit.intro"><span>[attributes<wbr>.limits<wbr>.type_length_limit<wbr>.intro]</wbr></wbr></wbr></span></a> </div> <p>The <em><code>type_length_limit</code> attribute</em> limits the maximum number of type substitutions made when constructing a concrete type during monomorphization.</p> <div class="rule" id="r-attributes.limits.type_length_limit.syntax">
<a class="rule-link" href="#r-attributes.limits.type_length_limit.syntax" title="attributes.limits.type_length_limit.syntax"><span>[attributes<wbr>.limits<wbr>.type_length_limit<wbr>.syntax]</wbr></wbr></wbr></span></a> </div> <p>It is applied at the <a href="../crates-and-source-files">crate</a> level, and uses the <a href="../attributes#grammar-MetaNameValueStr">MetaNameValueStr</a> syntax to set the limit based on the number of type substitutions.</p> <div class="alert alert-note"> <blockquote> <p class="alert-title">Note</p> <p>The default in <code>rustc</code> is 1048576.</p> </blockquote> </div> <pre data-language="rust">#![type_length_limit = "4"]

fn f&lt;T&gt;(x: T) {}

// This fails to compile because monomorphizing to
// `f::&lt;((((i32,), i32), i32), i32)&gt;` requires more than 4 type elements.
f(((((1,), 2), 3), 4));</pre><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2010 The Rust Project Developers<br>Licensed under the Apache License, Version 2.0 or the MIT license, at your option.<br>
    <a href="https://doc.rust-lang.org/reference/attributes/limits.html" class="_attribution-link">https://doc.rust-lang.org/reference/attributes/limits.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="../../assets/index.js"></script>
</body>

</html>