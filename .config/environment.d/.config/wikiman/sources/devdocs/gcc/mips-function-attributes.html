<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>6.33.20. MIPS Function Attributes</title>
    
    <link rel="preload" href="assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="application.css" />
    <link rel="stylesheet" type="text/css" href="assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="mips-function-attributes" prefix="" listing-src="navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _gcc"><h1 class="subsection" id="MIPS-Function-Attributes-1">6.33.20 MIPS Function Attributes</h1> <p>These function attributes are supported by the MIPS back end: </p> <dl compact> <dt><code>interrupt</code></dt> <dd> <p id="index-interrupt-function-attribute_002c-MIPS">Use this attribute to indicate that the specified function is an interrupt handler. The compiler generates function entry and exit sequences suitable for use in an interrupt handler when this attribute is present. An optional argument is supported for the interrupt attribute which allows the interrupt mode to be described. By default GCC assumes the external interrupt controller (EIC) mode is in use, this can be explicitly set using <code>eic</code>. When interrupts are non-masked then the requested Interrupt Priority Level (IPL) is copied to the current IPL which has the effect of only enabling higher priority interrupts. To use vectored interrupt mode use the argument <code>vector=[sw0|sw1|hw0|hw1|hw2|hw3|hw4|hw5]</code>, this will change the behavior of the non-masked interrupt support and GCC will arrange to mask all interrupts from sw0 up to and including the specified interrupt vector. </p> <p>You can use the following attributes to modify the behavior of an interrupt handler: </p>
<dl compact> <dt><code>use_shadow_register_set</code></dt> <dd> <p id="index-use_005fshadow_005fregister_005fset-function-attribute_002c-MIPS">Assume that the handler uses a shadow register set, instead of the main general-purpose registers. An optional argument <code>intstack</code> is supported to indicate that the shadow register set contains a valid stack pointer. </p> </dd> <dt><code>keep_interrupts_masked</code></dt> <dd> <p id="index-keep_005finterrupts_005fmasked-function-attribute_002c-MIPS">Keep interrupts masked for the whole function. Without this attribute, GCC tries to reenable interrupts for as much of the function as it can. </p> </dd> <dt><code>use_debug_exception_return</code></dt> <dd> <p id="index-use_005fdebug_005fexception_005freturn-function-attribute_002c-MIPS">Return using the <code>deret</code> instruction. Interrupt handlers that donâ€™t have this attribute return using <code>eret</code> instead. </p>
</dd> </dl> <p>You can use any combination of these attributes, as shown below: </p>
<div class="smallexample"> <pre class="smallexample" data-language="cpp">void __attribute__ ((interrupt)) v0 ();
void __attribute__ ((interrupt, use_shadow_register_set)) v1 ();
void __attribute__ ((interrupt, keep_interrupts_masked)) v2 ();
void __attribute__ ((interrupt, use_debug_exception_return)) v3 ();
void __attribute__ ((interrupt, use_shadow_register_set,
                     keep_interrupts_masked)) v4 ();
void __attribute__ ((interrupt, use_shadow_register_set,
                     use_debug_exception_return)) v5 ();
void __attribute__ ((interrupt, keep_interrupts_masked,
                     use_debug_exception_return)) v6 ();
void __attribute__ ((interrupt, use_shadow_register_set,
                     keep_interrupts_masked,
                     use_debug_exception_return)) v7 ();
void __attribute__ ((interrupt("eic"))) v8 ();
void __attribute__ ((interrupt("vector=hw3"))) v9 ();</pre>
</div> </dd> <dt><code>long_call</code></dt> <dt><code>short_call</code></dt> <dt><code>near</code></dt> <dt><code>far</code></dt> <dd>     <p id="index-far-function-attribute_002c-MIPS">These attributes specify how a particular function is called on MIPS. The attributes override the <samp>-mlong-calls</samp> (see <a href="mips-options#MIPS-Options">MIPS Options</a>) command-line switch. The <code>long_call</code> and <code>far</code> attributes are synonyms, and cause the compiler to always call the function by first loading its address into a register, and then using the contents of that register. The <code>short_call</code> and <code>near</code> attributes are synonyms, and have the opposite effect; they specify that non-PIC calls should be made using the more efficient <code>jal</code> instruction. </p> </dd> <dt><code>mips16</code></dt> <dt><code>nomips16</code></dt> <dd>  <p id="index-nomips16-function-attribute_002c-MIPS">On MIPS targets, you can use the <code>mips16</code> and <code>nomips16</code> function attributes to locally select or turn off MIPS16 code generation. A function with the <code>mips16</code> attribute is emitted as MIPS16 code, while MIPS16 code generation is disabled for functions with the <code>nomips16</code> attribute. These attributes override the <samp>-mips16</samp> and <samp>-mno-mips16</samp> options on the command line (see <a href="mips-options#MIPS-Options">MIPS Options</a>). </p> <p>When compiling files containing mixed MIPS16 and non-MIPS16 code, the preprocessor symbol <code>__mips16</code> reflects the setting on the command line, not that within individual functions. Mixed MIPS16 and non-MIPS16 code may interact badly with some GCC extensions such as <code>__builtin_apply</code> (see <a href="constructing-calls#Constructing-Calls">Constructing Calls</a>). </p> </dd> <dt><code>micromips, MIPS</code></dt> <dt><code>nomicromips, MIPS</code></dt> <dd>  <p id="index-nomicromips-function-attribute">On MIPS targets, you can use the <code>micromips</code> and <code>nomicromips</code> function attributes to locally select or turn off microMIPS code generation. A function with the <code>micromips</code> attribute is emitted as microMIPS code, while microMIPS code generation is disabled for functions with the <code>nomicromips</code> attribute. These attributes override the <samp>-mmicromips</samp> and <samp>-mno-micromips</samp> options on the command line (see <a href="mips-options#MIPS-Options">MIPS Options</a>). </p> <p>When compiling files containing mixed microMIPS and non-microMIPS code, the preprocessor symbol <code>__mips_micromips</code> reflects the setting on the command line, not that within individual functions. Mixed microMIPS and non-microMIPS code may interact badly with some GCC extensions such as <code>__builtin_apply</code> (see <a href="constructing-calls#Constructing-Calls">Constructing Calls</a>). </p> </dd> <dt><code>nocompression</code></dt> <dd> <p id="index-nocompression-function-attribute_002c-MIPS">On MIPS targets, you can use the <code>nocompression</code> function attribute to locally turn off MIPS16 and microMIPS code generation. This attribute overrides the <samp>-mips16</samp> and <samp>-mmicromips</samp> options on the command line (see <a href="mips-options#MIPS-Options">MIPS Options</a>). </p>
</dd> </dl>  <p class="header"> <p> Next: <a href="msp430-function-attributes#MSP430-Function-Attributes" accesskey="n" rel="next">MSP430 Function Attributes</a>, Previous: <a href="microsoft-windows-function-attributes#Microsoft-Windows-Function-Attributes" accesskey="p" rel="prev">Microsoft Windows Function Attributes</a>, Up: <a href="function-attributes#Function-Attributes" accesskey="u" rel="up">Function Attributes</a> [<a href="index#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="https://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/Option-Index.html#Option-Index" title="Index" rel="index">Index</a>]</p> </p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/MIPS-Function-Attributes.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/MIPS-Function-Attributes.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="assets/index.js"></script>
</body>

</html>