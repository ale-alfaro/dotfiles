<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>6.33.21. MSP430 Function Attributes</title>
    
    <link rel="preload" href="assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="application.css" />
    <link rel="stylesheet" type="text/css" href="assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="msp430-function-attributes" prefix="" listing-src="navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _gcc"><h1 class="subsection" id="MSP430-Function-Attributes-1">6.33.21 MSP430 Function Attributes</h1> <p>These function attributes are supported by the MSP430 back end: </p> <dl compact> <dt><code>critical</code></dt> <dd> <p id="index-critical-function-attribute_002c-MSP430">Critical functions disable interrupts upon entry and restore the previous interrupt state upon exit. Critical functions cannot also have the <code>naked</code>, <code>reentrant</code> or <code>interrupt</code> attributes. </p> <p>The MSP430 hardware ensures that interrupts are disabled on entry to <code>interrupt</code> functions, and restores the previous interrupt state on exit. The <code>critical</code> attribute is therefore redundant on <code>interrupt</code> functions. </p> </dd> <dt><code>interrupt</code></dt> <dd> <p id="index-interrupt-function-attribute_002c-MSP430">Use this attribute to indicate that the specified function is an interrupt handler. The compiler generates function entry and exit sequences suitable for use in an interrupt handler when this attribute is present. </p> <p>You can provide an argument to the interrupt attribute which specifies a name or number. If the argument is a number it indicates the slot in the interrupt vector table (0 - 31) to which this handler should be assigned. If the argument is a name it is treated as a symbolic name for the vector slot. These names should match up with appropriate entries in the linker script. By default the names <code>watchdog</code> for vector 26, <code>nmi</code> for vector 30 and <code>reset</code> for vector 31 are recognized. </p> </dd> <dt><code>naked</code></dt> <dd> <p id="index-naked-function-attribute_002c-MSP430">This attribute allows the compiler to construct the requisite function declaration, while allowing the body of the function to be assembly code. The specified function will not have prologue/epilogue sequences generated by the compiler. Only basic <code>asm</code> statements can safely be included in naked functions (see <a href="basic-asm#Basic-Asm">Basic Asm</a>). While using extended <code>asm</code> or a mixture of basic <code>asm</code> and C code may appear to work, they cannot be depended upon to work reliably and are not supported. </p> </dd> <dt><code>reentrant</code></dt> <dd> <p id="index-reentrant-function-attribute_002c-MSP430">Reentrant functions disable interrupts upon entry and enable them upon exit. Reentrant functions cannot also have the <code>naked</code> or <code>critical</code> attributes. They can have the <code>interrupt</code> attribute. </p> </dd> <dt><code>wakeup</code></dt> <dd> <p id="index-wakeup-function-attribute_002c-MSP430">This attribute only applies to interrupt functions. It is silently ignored if applied to a non-interrupt function. A wakeup interrupt function will rouse the processor from any low-power state that it might be in when the function exits. </p> </dd> <dt><code>lower</code></dt> <dt><code>upper</code></dt> <dt><code>either</code></dt> <dd>   <p id="index-either-function-attribute_002c-MSP430">On the MSP430 target these attributes can be used to specify whether the function or variable should be placed into low memory, high memory, or the placement should be left to the linker to decide. The attributes are only significant if compiling for the MSP430X architecture. </p> <p>The attributes work in conjunction with a linker script that has been augmented to specify where to place sections with a <code>.lower</code> and a <code>.upper</code> prefix. So, for example, as well as placing the <code>.data</code> section, the script also specifies the placement of a <code>.lower.data</code> and a <code>.upper.data</code> section. The intention is that <code>lower</code> sections are placed into a small but easier to access memory region and the upper sections are placed into a larger, but slower to access, region. </p> <p>The <code>either</code> attribute is special. It tells the linker to place the object into the corresponding <code>lower</code> section if there is room for it. If there is insufficient room then the object is placed into the corresponding <code>upper</code> section instead. Note that the placement algorithm is not very sophisticated. It does not attempt to find an optimal packing of the <code>lower</code> sections. It just makes one pass over the objects and does the best that it can. Using the <samp>-ffunction-sections</samp> and <samp>-fdata-sections</samp> command-line options can help the packing, however, since they produce smaller, easier to pack regions. </p>
</dd> </dl>  <p class="header"> <p> Next: <a href="nds32-function-attributes#NDS32-Function-Attributes" accesskey="n" rel="next">NDS32 Function Attributes</a>, Previous: <a href="mips-function-attributes#MIPS-Function-Attributes" accesskey="p" rel="prev">MIPS Function Attributes</a>, Up: <a href="function-attributes#Function-Attributes" accesskey="u" rel="up">Function Attributes</a> [<a href="index#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="https://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/Option-Index.html#Option-Index" title="Index" rel="index">Index</a>]</p> </p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/MSP430-Function-Attributes.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/MSP430-Function-Attributes.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="assets/index.js"></script>
</body>

</html>