<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>6.31. Cast to a Union Type</title>
    
    <link rel="preload" href="assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="application.css" />
    <link rel="stylesheet" type="text/css" href="assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="cast-to-union" prefix="" listing-src="navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _gcc"><h1 class="section" id="Cast-to-a-Union-Type">6.31 Cast to a Union Type</h1>   <p id="index-union_002c-casting-to-a">A cast to a union type is a C extension not available in C++. It looks just like ordinary casts with the constraint that the type specified is a union type. You can specify the type either with the <code>union</code> keyword or with a <code>typedef</code> name that refers to a union. The result of a cast to a union is a temporary rvalue of the union type with a member whose type matches that of the operand initialized to the value of the operand. The effect of a cast to a union is similar to a compound literal except that it yields an rvalue like standard casts do. See <a href="compound-literals#Compound-Literals">Compound Literals</a>. </p> <p>Expressions that may be cast to the union type are those whose type matches at least one of the members of the union. Thus, given the following union and variables: </p> <div class="smallexample"> <pre class="smallexample" data-language="cpp">union foo { int i; double d; };
int x;
double y;
union foo z;</pre>
</div> <p>both <code>x</code> and <code>y</code> can be cast to type <code>union foo</code> and the following assignments </p>
<div class="smallexample"> <pre class="smallexample" data-language="cpp">z = (union foo) x;
z = (union foo) y;</pre>
</div> <p>are shorthand equivalents of these </p>
<div class="smallexample"> <pre class="smallexample" data-language="cpp">z = (union foo) { .i = x };
z = (union foo) { .d = y };</pre>
</div> <p>However, <code>(union foo) FLT_MAX;</code> is not a valid cast because the union has no member of type <code>float</code>. </p> <p>Using the cast as the right-hand side of an assignment to a variable of union type is equivalent to storing in a member of the union with the same type </p> <div class="smallexample"> <pre class="smallexample" data-language="cpp">union foo u;
/* <span class="roman">…</span> */
u = (union foo) x  ≡  u.i = x
u = (union foo) y  ≡  u.d = y</pre>
</div> <p>You can also use the union cast as a function argument: </p> <div class="smallexample"> <pre class="smallexample" data-language="cpp">void hack (union foo);
/* <span class="roman">…</span> */
hack ((union foo) x);</pre>
</div>  <p class="header"> <p> Next: <a href="mixed-declarations#Mixed-Declarations" accesskey="n" rel="next">Mixed Declarations</a>, Previous: <a href="case-ranges#Case-Ranges" accesskey="p" rel="prev">Case Ranges</a>, Up: <a href="c-extensions#C-Extensions" accesskey="u" rel="up">C Extensions</a> [<a href="index#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="https://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/Option-Index.html#Option-Index" title="Index" rel="index">Index</a>]</p> </p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/Cast-to-Union.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/Cast-to-Union.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="assets/index.js"></script>
</body>

</html>