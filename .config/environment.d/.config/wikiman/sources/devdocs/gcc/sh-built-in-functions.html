<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>6.60.27. SH Built-in Functions</title>
    
    <link rel="preload" href="assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="application.css" />
    <link rel="stylesheet" type="text/css" href="assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="sh-built-in-functions" prefix="" listing-src="navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _gcc"><h1 class="subsection" id="SH-Built-in-Functions-1">6.60.27 SH Built-in Functions</h1> <p>The following built-in functions are supported on the SH1, SH2, SH3 and SH4 families of processors: </p> <dl> <dt>Built-in Function: void <strong id="index-_005f_005fbuiltin_005fset_005fthread_005fpointer">__builtin_set_thread_pointer</strong> (void *<var>ptr</var>)</dt> <dd>
<p>Sets the ‘<samp>GBR</samp>’ register to the specified value <var>ptr</var>. This is usually used by system code that manages threads and execution contexts. The compiler normally does not generate code that modifies the contents of ‘<samp>GBR</samp>’ and thus the value is preserved across function calls. Changing the ‘<samp>GBR</samp>’ value in user code must be done with caution, since the compiler might use ‘<samp>GBR</samp>’ in order to access thread local variables. </p> </dd>
</dl> <dl> <dt>Built-in Function: void * <strong id="index-_005f_005fbuiltin_005fthread_005fpointer">__builtin_thread_pointer</strong> (void)</dt> <dd>
<p>Returns the value that is currently set in the ‘<samp>GBR</samp>’ register. Memory loads and stores that use the thread pointer as a base address are turned into ‘<samp>GBR</samp>’ based displacement loads and stores, if possible. For example: </p>
<div class="smallexample"> <pre class="smallexample" data-language="cpp">struct my_tcb
{
   int a, b, c, d, e;
};

int get_tcb_value (void)
{
  // Generate ‘<samp>mov.l @(8,gbr),r0</samp>’ instruction
  return ((my_tcb*)__builtin_thread_pointer ())-&gt;c;
}</pre>
</div> </dd>
</dl> <dl> <dt>Built-in Function: unsigned int <strong id="index-_005f_005fbuiltin_005fsh_005fget_005ffpscr">__builtin_sh_get_fpscr</strong> (void)</dt> <dd><p>Returns the value that is currently set in the ‘<samp>FPSCR</samp>’ register. </p></dd>
</dl> <dl> <dt>Built-in Function: void <strong id="index-_005f_005fbuiltin_005fsh_005fset_005ffpscr">__builtin_sh_set_fpscr</strong> (unsigned int <var>val</var>)</dt> <dd><p>Sets the ‘<samp>FPSCR</samp>’ register to the specified value <var>val</var>, while preserving the current values of the FR, SZ and PR bits. </p></dd>
</dl><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/SH-Built-in-Functions.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-9.5.0/gcc/SH-Built-in-Functions.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="assets/index.js"></script>
</body>

</html>