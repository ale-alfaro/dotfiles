<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>ioctl (2)</title>
    
    <link rel="preload" href="../assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="../application.css" />
    <link rel="stylesheet" type="text/css" href="../assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="man2/ioctl.2" prefix="../" listing-src="../navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _man"><h1>ioctl(2) — Linux manual page</h1>   <pre>
<span class="headline"><i>ioctl</i>(2)                   System Calls Manual                  <i>ioctl</i>(2)</span>
</pre> <h2>
NAME </h2>
<pre>
       ioctl - control device
</pre> <h2>
LIBRARY </h2>
<pre>
       Standard C library (<i>libc</i>, <i>-lc</i>)
</pre> <h2>
SYNOPSIS </h2>
<pre>
       <b>#include &lt;sys/ioctl.h&gt;</b>

       <b>int ioctl(int </b><i>fd</i><b>, unsigned long </b><i>op</i><b>, ...);  </b>/* glibc, BSD */
       <b>int ioctl(int </b><i>fd</i><b>, int </b><i>op</i><b>, ...);            </b>/* musl, other UNIX */
</pre> <h2>
DESCRIPTION </h2>
<pre>
       The <b>ioctl</b>() system call manipulates the underlying device
       parameters of special files.  In particular, many operating
       characteristics of character special files (e.g., terminals) may
       be controlled with <b>ioctl</b>() operations.  The argument <i>fd</i> must be
       an open file descriptor.

       The second argument is a device-dependent operation code.  The
       third argument is an untyped pointer to memory.  It's
       traditionally <b>char *</b><i>argp</i> (from the days before <b>void * </b>was valid
       C), and will be so named for this discussion.

       An <b>ioctl</b>() <i>op</i> has encoded in it whether the argument is an <i>in</i>
       parameter or <i>out</i> parameter, and the size of the argument <i>argp</i> in
       bytes.  Macros and defines used in specifying an <b>ioctl</b>() <i>op</i> are
       located in the file <i>&lt;sys/ioctl.h&gt;</i>.  See NOTES.
</pre> <h2>
RETURN VALUE </h2>
<pre>
       Usually, on success zero is returned.  A few <b>ioctl</b>() operations
       use the return value as an output parameter and return a
       nonnegative value on success.  On error, -1 is returned, and
       <i><a href="../man3/errno.3">errno</a></i> is set to indicate the error.
</pre> <h2>
ERRORS </h2>
<pre>
       <b>EBADF  </b><i>fd</i> is not a valid file descriptor.

       <b>EFAULT </b><i>argp</i> references an inaccessible memory area.

       <b>EINVAL </b><i>op</i> or <i>argp</i> is not valid.

       <b>ENOTTY </b><i>fd</i> is not associated with a character special device.

       <b>ENOTTY </b>The specified operation does not apply to the kind of
              object that the file descriptor <i>fd</i> references.
</pre> <h2>
VERSIONS </h2>
<pre>
       Arguments, returns, and semantics of <b>ioctl</b>() vary according to
       the device driver in question (the call is used as a catch-all
       for operations that don't cleanly fit the UNIX stream I/O model).
</pre> <h2>
STANDARDS </h2>
<pre>
       None.
</pre> <h2>
HISTORY </h2>
<pre>
       Version 7 AT&amp;T UNIX has
           <b>ioctl(int </b><i>fildes</i><b>, int </b><i>op</i><b>, struct sgttyb *</b><i>argp</i><b>);</b>
       (where <b>struct sgttyb </b>has historically been used by <a href="stty.2">stty(2)</a> and
       <a href="gtty.2">gtty(2)</a>, and is polymorphic by operation type (like a <b>void *</b>
       would be, if it had been available)).

       SysIII documents <i>arg</i> without a type at all.

       4.3BSD has
           <b>ioctl(int </b><i>d</i><b>, unsigned long </b><i>op</i><b>, char *</b><i>argp</i><b>);</b>
       (with <b>char * </b>similarly in for <b>void *</b>).

       SysVr4 has
           <b>int ioctl(int </b><i>fildes</i><b>, int </b><i>op</i><b>, ... /* </b><i>arg</i> <b>*/);</b>
</pre> <h2>
NOTES </h2>
<pre>
       In order to use this call, one needs an open file descriptor.
       Often the <a href="open.2">open(2)</a> call has unwanted side effects, that can be
       avoided under Linux by giving it the <b>O_NONBLOCK </b>flag.

   <b>ioctl structure</b>
       Ioctl <i>op</i> values are 32-bit constants.  In principle these
       constants are completely arbitrary, but people have tried to
       build some structure into them.

       The old Linux situation was that of mostly 16-bit constants,
       where the last byte is a serial number, and the preceding byte(s)
       give a type indicating the driver.  Sometimes the major number
       was used: 0x03 for the <b>HDIO_* </b>ioctls, 0x06 for the <b>LP* </b>ioctls.
       And sometimes one or more ASCII letters were used.  For example,
       <b>TCGETS </b>has value 0x00005401, with 0x54 = 'T' indicating the
       terminal driver, and <b>CYGETTIMEOUT </b>has value 0x00435906, with 0x43
       0x59 = 'C' 'Y' indicating the cyclades driver.

       Later (0.98p5) some more information was built into the number.
       One has 2 direction bits (00: none, 01: write, 10: read, 11:
       read/write) followed by 14 size bits (giving the size of the
       argument), followed by an 8-bit type (collecting the ioctls in
       groups for a common purpose or a common driver), and an 8-bit
       serial number.

       The macros describing this structure live in <i>&lt;asm/ioctl.h&gt;</i> and
       are <b>_IO(type,nr) </b>and <b>{_IOR,_IOW,_IOWR}(type,nr,size)</b>.  They use
       <i>sizeof(size)</i> so that size is a misnomer here: this third argument
       is a data type.

       Note that the size bits are very unreliable: in lots of cases
       they are wrong, either because of buggy macros using
       <i>sizeof(sizeof(struct))</i>, or because of legacy values.

       Thus, it seems that the new structure only gave disadvantages: it
       does not help in checking, but it causes varying values for the
       various architectures.
</pre> <h2>
SEE ALSO </h2>
<pre>
       <a href="execve.2">execve(2)</a>, <a href="fcntl.2">fcntl(2)</a>, <a href="ioctl_console.2">ioctl_console(2)</a>, <a href="ioctl_fat.2">ioctl_fat(2)</a>, <a href="ioctl_fs.2">ioctl_fs(2)</a>,
       <a href="ioctl_fsmap.2">ioctl_fsmap(2)</a>, <a href="ioctl_nsfs.2">ioctl_nsfs(2)</a>, <a href="ioctl_tty.2">ioctl_tty(2)</a>,
       <a href="ioctl_userfaultfd.2">ioctl_userfaultfd(2)</a>, <a href="ioctl_eventpoll.2">ioctl_eventpoll(2)</a>, <a href="open.2">open(2)</a>, <a href="../man4/sd.4">sd(4)</a>, <a href="../man4/tty.4">tty(4)</a>
</pre> <h2>
COLOPHON </h2>
<pre>
       This page is part of the <i>man-pages</i> (Linux kernel and C library
       user-space interface documentation) project.  Information about
       the project can be found at 
       ⟨<a href="https://www.kernel.org/doc/man-pages/">https://www.kernel.org/doc/man-pages/</a>⟩.  If you have a bug report
       for this manual page, see
       ⟨<a href="https://git.kernel.org/pub/scm/docs/man-pages/man-pages.git/tree/CONTRIBUTING">https://git.kernel.org/pub/scm/docs/man-pages/man-pages.git/tree/CONTRIBUTING</a>⟩.
       This page was obtained from the tarball man-pages-6.9.1.tar.gz
       fetched from
       ⟨<a href="https://mirrors.edge.kernel.org/pub/linux/docs/man-pages/">https://mirrors.edge.kernel.org/pub/linux/docs/man-pages/</a>⟩ on
       2024-06-26.  If you discover any rendering problems in this HTML
       version of the page, or you believe there is a better or more up-
       to-date source for the page, or you have corrections or
       improvements to the information in this COLOPHON (which is <i>not</i>
       part of the original manual page), send a mail to
       man-pages@man7.org

<span class="footline">Linux man-pages 6.9.1          2024-06-13                       <i>ioctl</i>(2)</span>
</pre>  <p>Pages that refer to this page: <a href="../man1/apropos.1">apropos(1)</a>, <a href="../man1/man.1">man(1)</a>, <a href="../man1/pipesz.1">pipesz(1)</a>, <a href="../man1/setterm.1">setterm(1)</a>, <a href="../man1/whatis.1">whatis(1)</a>, <a href="fat_ioctl_get_volume_id.2const">FAT_IOCTL_GET_VOLUME_ID(2const)</a>, <a href="fat_ioctl_set_attributes.2const">FAT_IOCTL_SET_ATTRIBUTES(2const)</a>, <a href="ficlone.2const">FICLONE(2const)</a>, <a href="fideduperange.2const">FIDEDUPERANGE(2const)</a>, <a href="fionread.2const">FIONREAD(2const)</a>, <a href="fs_ioc_setflags.2const">FS_IOC_SETFLAGS(2const)</a>, <a href="fs_ioc_setfslabel.2const">FS_IOC_SETFSLABEL(2const)</a>, <a href="getsockopt.2">getsockopt(2)</a>, <a href="ioctl_console.2">ioctl_console(2)</a>, <a href="ioctl_eventpoll.2">ioctl_eventpoll(2)</a>, <a href="ioctl_fat.2">ioctl_fat(2)</a>, <a href="ioctl_fs.2">ioctl_fs(2)</a>, <a href="ioctl_fsmap.2">ioctl_fsmap(2)</a>, <a href="ioctl_kd.2">ioctl_kd(2)</a>, <a href="ioctl_nsfs.2">ioctl_nsfs(2)</a>, <a href="ioctl_pipe.2">ioctl_pipe(2)</a>, <a href="ioctl_tty.2">ioctl_tty(2)</a>, <a href="ioctl_userfaultfd.2">ioctl_userfaultfd(2)</a>, <a href="ioctl_vt.2">ioctl_vt(2)</a>, <a href="ioctl_xfs_ag_geometry.2">ioctl_xfs_ag_geometry(2)</a>, <a href="ioctl_xfs_bulkstat.2">ioctl_xfs_bulkstat(2)</a>, <a href="ioctl_xfs_fsbulkstat.2">ioctl_xfs_fsbulkstat(2)</a>, <a href="ioctl_xfs_fscounts.2">ioctl_xfs_fscounts(2)</a>, <a href="ioctl_xfs_fsgeometry.2">ioctl_xfs_fsgeometry(2)</a>, <a href="ioctl_xfs_fsgetxattr.2">ioctl_xfs_fsgetxattr(2)</a>, <a href="ioctl_xfs_fsinumbers.2">ioctl_xfs_fsinumbers(2)</a>, <a href="ioctl_xfs_getbmapx.2">ioctl_xfs_getbmapx(2)</a>, <a href="ioctl_xfs_getresblks.2">ioctl_xfs_getresblks(2)</a>, <a href="ioctl_xfs_goingdown.2">ioctl_xfs_goingdown(2)</a>, <a href="ioctl_xfs_inumbers.2">ioctl_xfs_inumbers(2)</a>, <a href="ioctl_xfs_scrub_metadata.2">ioctl_xfs_scrub_metadata(2)</a>, <a href="ns_get_nstype.2const">NS_GET_NSTYPE(2const)</a>, <a href="ns_get_owner_uid.2const">NS_GET_OWNER_UID(2const)</a>, <a href="ns_get_userns.2const">NS_GET_USERNS(2const)</a>, <a href="open.2">open(2)</a>, <a href="pagemap_scan.2const">PAGEMAP_SCAN(2const)</a>, <a href="perf_event_open.2">perf_event_open(2)</a>, <a href="pr_set_tagged_addr_ctrl.2const">PR_SET_TAGGED_ADDR_CTRL(2const)</a>, <a href="read.2">read(2)</a>, <a href="seccomp_unotify.2">seccomp_unotify(2)</a>, <a href="socket.2">socket(2)</a>, <a href="syscalls.2">syscalls(2)</a>, <a href="tcsbrk.2const">TCSBRK(2const)</a>, <a href="tcsets.2const">TCSETS(2const)</a>, <a href="tcxonc.2const">TCXONC(2const)</a>, <a href="timerfd_create.2">timerfd_create(2)</a>, <a href="tioccons.2const">TIOCCONS(2const)</a>, <a href="tiocexcl.2const">TIOCEXCL(2const)</a>, <a href="tioclinux.2const">TIOCLINUX(2const)</a>, <a href="tiocmset.2const">TIOCMSET(2const)</a>, <a href="tiocpkt.2const">TIOCPKT(2const)</a>, <a href="tiocsctty.2const">TIOCSCTTY(2const)</a>, <a href="tiocsetd.2const">TIOCSETD(2const)</a>, <a href="tiocslcktrmios.2const">TIOCSLCKTRMIOS(2const)</a>, <a href="tiocspgrp.2const">TIOCSPGRP(2const)</a>, <a href="tiocssoftcar.2const">TIOCSSOFTCAR(2const)</a>, <a href="tiocsti.2const">TIOCSTI(2const)</a>, <a href="tiocswinsz.2const">TIOCSWINSZ(2const)</a>, <a href="tiocttygstruct.2const">TIOCTTYGSTRUCT(2const)</a>, <a href="uffdio_api.2const">UFFDIO_API(2const)</a>, <a href="uffdio_continue.2const">UFFDIO_CONTINUE(2const)</a>, <a href="uffdio_copy.2const">UFFDIO_COPY(2const)</a>, <a href="uffdio_poison.2const">UFFDIO_POISON(2const)</a>, <a href="uffdio_register.2const">UFFDIO_REGISTER(2const)</a>, <a href="uffdio_unregister.2const">UFFDIO_UNREGISTER(2const)</a>, <a href="uffdio_wake.2const">UFFDIO_WAKE(2const)</a>, <a href="uffdio_writeprotect.2const">UFFDIO_WRITEPROTECT(2const)</a>, <a href="uffdio_zeropage.2const">UFFDIO_ZEROPAGE(2const)</a>, <a href="userfaultfd.2">userfaultfd(2)</a>, <a href="vfat_ioctl_readdir_both.2const">VFAT_IOCTL_READDIR_BOTH(2const)</a>, <a href="write.2">write(2)</a>, <a href="../man3/errno.3">errno(3)</a>, <a href="../man3/grantpt.3">grantpt(3)</a>, <a href="../man3/if_nameindex.3">if_nameindex(3)</a>, <a href="../man3/if_nametoindex.3">if_nametoindex(3)</a>, <a href="../man3/openpty.3">openpty(3)</a>, <a href="../man4/dsp56k.4">dsp56k(4)</a>, <a href="../man4/fd.4">fd(4)</a>, <a href="../man4/lirc.4">lirc(4)</a>, <a href="../man4/loop.4">loop(4)</a>, <a href="../man4/lp.4">lp(4)</a>, <a href="../man4/random.4">random(4)</a>, <a href="../man4/rtc.4">rtc(4)</a>, <a href="../man4/sd.4">sd(4)</a>, <a href="../man4/smartpqi.4">smartpqi(4)</a>, <a href="../man4/st.4">st(4)</a>, <a href="../man4/tty.4">tty(4)</a>, <a href="../man4/vcs.4">vcs(4)</a>, <a href="../man5/proc_pid_io.5">proc_pid_io(5)</a>, <a href="../man7/arp.7">arp(7)</a>, <a href="../man7/capabilities.7">capabilities(7)</a>, <a href="../man7/inotify.7">inotify(7)</a>, <a href="../man7/landlock.7">landlock(7)</a>, <a href="../man7/namespaces.7">namespaces(7)</a>, <a href="../man7/pipe.7">pipe(7)</a>, <a href="../man7/pty.7">pty(7)</a>, <a href="../man7/signal.7">signal(7)</a>, <a href="../man7/socket.7">socket(7)</a>, <a href="../man7/tcp.7">tcp(7)</a>, <a href="../man7/termio.7">termio(7)</a>, <a href="../man7/udp.7">udp(7)</a>, <a href="../man7/unix.7">unix(7)</a>, <a href="../man8/systemd-makefs@.service.8">systemd-makefs@.service(8)</a> </p> <hr>         <div class="_attribution">
  <p class="_attribution-p">
    ...<br>
    <a href="https://man7.org/linux/man-pages/man2/ioctl.2.html" class="_attribution-link">https://man7.org/linux/man-pages/man2/ioctl.2.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="../assets/index.js"></script>
</body>

</html>