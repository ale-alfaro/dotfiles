<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>7.1.6. Further Interoperability of Fortran with C</title>
    
    <link rel="preload" href="assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="application.css" />
    <link rel="stylesheet" type="text/css" href="assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="further-interoperability-of-fortran-with-c" prefix="" listing-src="navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _gnu_fortran"><h1 class="subsection" id="Further-Interoperability-of-Fortran-with-C-1">7.1.6 Further Interoperability of Fortran with C</h1> <p>The Technical Specification ISO/IEC TS 29113:2012 on further interoperability of Fortran with C extends the interoperability support of Fortran 2003 and Fortran 2008. Besides removing some restrictions and constraints, it adds assumed-type (<code>TYPE(*)</code>) and assumed-rank (<code>dimension</code>) variables and allows for interoperability of assumed-shape, assumed-rank and deferred-shape arrays, including allocatables and pointers. </p> <p>Note: Currently, GNU Fortran does not use internally the array descriptor (dope vector) as specified in the Technical Specification, but uses an array descriptor with different fields. Assumed type and assumed rank formal arguments are converted in the library to the specified form. The ISO_Fortran_binding API functions (also Fortran 2018 18.4) are implemented in libgfortran. Alternatively, the Chasm Language Interoperability Tools, <a href="http://chasm-interop.sourceforge.net/">http://chasm-interop.sourceforge.net/</a>, provide an interface to GNU Fortran’s array descriptor. </p> <p>The Technical Specification adds the following new features, which are supported by GNU Fortran: </p> <ul> <li> The <code>ASYNCHRONOUS</code> attribute has been clarified and extended to allow its use with asynchronous communication in user-provided libraries such as in implementations of the Message Passing Interface specification. </li>
<li> Many constraints have been relaxed, in particular for the <code>C_LOC</code> and <code>C_F_POINTER</code> intrinsics. </li>
<li> The <code>OPTIONAL</code> attribute is now allowed for dummy arguments; an absent argument matches a <code>NULL</code> pointer. </li>
<li> Assumed types (<code>TYPE(*)</code>) have been added, which may only be used for dummy arguments. They are unlimited polymorphic but contrary to <code>CLASS(*)</code> they do not contain any type information, similar to C’s <code>void *</code> pointers. Expressions of any type and kind can be passed; thus, it can be used as replacement for <code>TYPE(C_PTR)</code>, avoiding the use of <code>C_LOC</code> in the caller. <p>Note, however, that <code>TYPE(*)</code> only accepts scalar arguments, unless the <code>DIMENSION</code> is explicitly specified. As <code>DIMENSION(*)</code> only supports array (including array elements) but no scalars, it is not a full replacement for <code>C_LOC</code>. On the other hand, assumed-type assumed-rank dummy arguments (<code>TYPE(*), DIMENSION(..)</code>) allow for both scalars and arrays, but require special code on the callee side to handle the array descriptor. </p> </li>
<li> Assumed-rank arrays (<code>DIMENSION(..)</code>) as dummy argument allow that scalars and arrays of any rank can be passed as actual argument. As the Technical Specification does not provide for direct means to operate with them, they have to be used either from the C side or be converted using <code>C_LOC</code> and <code>C_F_POINTER</code> to scalars or arrays of a specific rank. The rank can be determined using the <code>RANK</code> intrinisic. </li>
</ul> <p>Currently unimplemented: </p> <ul> <li> GNU Fortran always uses an array descriptor, which does not match the one of the Technical Specification. The <code>ISO_Fortran_binding.h</code> header file and the C functions it specifies are not available. </li>
<li> Using assumed-shape, assumed-rank and deferred-shape arrays in <code>BIND(C)</code> procedures is not fully supported. In particular, C interoperable strings of other length than one are not supported as this requires the new array descriptor. </li>
</ul>  <p class="header"> <p> Previous: <a href="working-with-pointers#Working-with-Pointers" accesskey="p" rel="prev">Working with Pointers</a>, Up: <a href="interoperability-with-c#Interoperability-with-C" accesskey="u" rel="up">Interoperability with C</a> [<a href="index#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gfortran/Option-Index.html#Option-Index" title="Index" rel="index">Index</a>]</p> </p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gfortran/Further-Interoperability-of-Fortran-with-C.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gfortran/Further-Interoperability-of-Fortran-with-C.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="assets/index.js"></script>
</body>

</html>