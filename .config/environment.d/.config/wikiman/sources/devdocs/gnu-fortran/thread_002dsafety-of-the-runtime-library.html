<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>5.5. Thread-safety of the runtime library</title>
    
    <link rel="preload" href="assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="application.css" />
    <link rel="stylesheet" type="text/css" href="assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="thread_002dsafety-of-the-runtime-library" prefix="" listing-src="navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _gnu_fortran"><h1 class="section" id="Thread_002dsafety-of-the-runtime-library-1">5.5 Thread-safety of the runtime library</h1>  <p id="index-thread_002dsafety_002c-threads">GNU Fortran can be used in programs with multiple threads, e.g. by using OpenMP, by calling OS thread handling functions via the <code>ISO_C_BINDING</code> facility, or by GNU Fortran compiled library code being called from a multi-threaded program. </p> <p>The GNU Fortran runtime library, (<code>libgfortran</code>), supports being called concurrently from multiple threads with the following exceptions. </p> <p>During library initialization, the C <code>getenv</code> function is used, which need not be thread-safe. Similarly, the <code>getenv</code> function is used to implement the <code>GET_ENVIRONMENT_VARIABLE</code> and <code>GETENV</code> intrinsics. It is the responsibility of the user to ensure that the environment is not being updated concurrently when any of these actions are taking place. </p> <p>The <code>EXECUTE_COMMAND_LINE</code> and <code>SYSTEM</code> intrinsics are implemented with the <code>system</code> function, which need not be thread-safe. It is the responsibility of the user to ensure that <code>system</code> is not called concurrently. </p> <p>For platforms not supporting thread-safe POSIX functions, further functionality might not be thread-safe. For details, please consult the documentation for your operating system. </p> <p>The GNU Fortran runtime library uses various C library functions that depend on the locale, such as <code>strtod</code> and <code>snprintf</code>. In order to work correctly in locale-aware programs that set the locale using <code>setlocale</code>, the locale is reset to the default “C” locale while executing a formatted <code>READ</code> or <code>WRITE</code> statement. On targets supporting the POSIX 2008 per-thread locale functions (e.g. <code>newlocale</code>, <code>uselocale</code>, <code>freelocale</code>), these are used and thus the global locale set using <code>setlocale</code> or the per-thread locales in other threads are not affected. However, on targets lacking this functionality, the global LC_NUMERIC locale is set to “C” during the formatted I/O. Thus, on such targets it’s not safe to call <code>setlocale</code> concurrently from another thread while a Fortran formatted I/O operation is in progress. Also, other threads doing something dependent on the LC_NUMERIC locale might not work correctly if a formatted I/O operation is in progress in another thread. </p>  <p class="header"> <p> Next: <a href="data-consistency-and-durability#Data-consistency-and-durability" accesskey="n" rel="next">Data consistency and durability</a>, Previous: <a href="max-and-min-intrinsics-with-real-nan-arguments#MAX-and-MIN-intrinsics-with-REAL-NaN-arguments" accesskey="p" rel="prev">MAX and MIN intrinsics with REAL NaN arguments</a>, Up: <a href="compiler-characteristics#Compiler-Characteristics" accesskey="u" rel="up">Compiler Characteristics</a> [<a href="index#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gfortran/Option-Index.html#Option-Index" title="Index" rel="index">Index</a>]</p> </p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gfortran/Thread_002dsafety-of-the-runtime-library.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gfortran/Thread_002dsafety-of-the-runtime-library.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="assets/index.js"></script>
</body>

</html>