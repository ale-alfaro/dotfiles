<html class="_theme-default">
<head>
    <meta charset="utf-8">
    <title>6.1.18. Argument list functions %VAL, %REF and %LOC</title>
    
    <link rel="preload" href="assets/index.js" as="script" type="text/javascript" />

    <link rel="stylesheet" type="text/css" href="application.css" />
    <link rel="stylesheet" type="text/css" href="assets/index.css" />
</head>
<body>
    <div class="_app">
        <devdocs-navbar current="argument-list-functions" prefix="" listing-src="navbar.json"></devdocs-navbar>
        <div class="_container">
            <main class="_content">
                <div class="_page _gnu_fortran"><h1 class="subsection" id="Argument-list-functions-_0025VAL_002c-_0025REF-and-_0025LOC">6.1.18 Argument list functions %VAL, %REF and %LOC</h1>     <p id="index-_0025LOC">GNU Fortran supports argument list functions <code>%VAL</code>, <code>%REF</code> and <code>%LOC</code> statements, for backward compatibility with g77. It is recommended that these should be used only for code that is accessing facilities outside of GNU Fortran, such as operating system or windowing facilities. It is best to constrain such uses to isolated portions of a programâ€“portions that deal specifically and exclusively with low-level, system-dependent facilities. Such portions might well provide a portable interface for use by the program as a whole, but are themselves not portable, and should be thoroughly tested each time they are rebuilt using a new compiler or version of a compiler. </p> <p><code>%VAL</code> passes a scalar argument by value, <code>%REF</code> passes it by reference and <code>%LOC</code> passes its memory location. Since gfortran already passes scalar arguments by reference, <code>%REF</code> is in effect a do-nothing. <code>%LOC</code> has the same effect as a Fortran pointer. </p> <p>An example of passing an argument by value to a C subroutine foo.: </p>
<div class="smallexample"> <pre class="smallexample">C
C prototype      void foo_ (float x);
C
      external foo
      real*4 x
      x = 3.14159
      call foo (%VAL (x))
      end</pre>
</div> <p>For details refer to the g77 manual <a href="https://gcc.gnu.org/onlinedocs/gcc-3.4.6/g77/index.html#Top">https://gcc.gnu.org/onlinedocs/gcc-3.4.6/g77/index.html#Top</a>. </p> <p>Also, <code>c_by_val.f</code> and its partner <code>c_by_val.c</code> of the GNU Fortran testsuite are worth a look. </p><div class="_attribution">
  <p class="_attribution-p">
    &copy; Free Software Foundation<br>Licensed under the GNU Free Documentation License, Version 1.3.<br>
    <a href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gfortran/Argument-list-functions.html" class="_attribution-link">https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gfortran/Argument-list-functions.html</a>
  </p>
</div>
</div>
            </main>
        </div>
    </div>
    <script type="text/javascript" src="assets/index.js"></script>
</body>

</html>